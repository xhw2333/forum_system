{"version":3,"sources":["store/index.js","component/header/header.jsx","component/footer/footer.jsx","pages/main/main.jsx","utils/check.js","api/ajax.js","pages/login/login.jsx","component/noteItem/noteItem.jsx","pages/home/home.jsx","pages/note/note.jsx","pages/friend/friend.jsx","component/pieChart/pieChart.jsx","pages/me/me.jsx","pages/detail/detail.jsx","pages/publish/publish.jsx","routes/index.js","App.jsx","index.js"],"names":["global","user","name","pwd","uid","tagArr","header","state","ifLogin","handleExit","Modal","confirm","title","okText","cancelText","onOk","props","history","replace","setState","this","token","Pubsub","subscribe","msg","data","unsubscribe","className","to","style","display","onClick","Component","withRouter","footer","main","routes","map","r","path","component","exact","checkValIsNull","val","length","BASE","ajax","url","type","baseURL","hide","message","loading","Promise","resolve","reject","axios","get","params","post","then","res","catch","err","finally","setTimeout","login","loginModal","imgURL","handleLogin","value","code","console","log","info","toLowerCase","status","error","success","id","push","handleRegister","rname","rpwd","rnpwd","npwd","getCode","document","querySelector","innerHTML","toggleBtn","ref","c","width","Password","iconRender","visible","EyeTwoTone","EyeInvisibleOutlined","size","noteItem","note","author","color","comment","content","date","nid","praise","tag","tid","goDetail","pathname","query","base","Object","getOwnPropertyNames","UserOutlined","MessageOutlined","LikeOutlined","Search","Input","home","tagList","curIndex","noteList","onSearch","key","changeTag","index","reqTagList","reqNoteList","location","placeholder","enterButton","textAlign","columns","dataIndex","render","align","e","handleDelete","showMore","getMyNote","pagination","dataSource","bordered","friend","friendList","friendModal","addFriend","userList","fid","getFriendList","goFriend","toggleModal","searchVal","renderItem","item","Item","actions","preventDefault","Meta","avatar","icon","description","onCancel","pieChart","pieRender","classify","noteTotal","count","chart","Chart","container","autoFit","height","coordinate","radius","tooltip","showMarkers","interval","adjust","position","opacity","active","element","shape","matrix","Util","zoom","label","offset","fill","fontSize","shadowBlur","shadowColor","obj","Math","floor","interaction","nextProps","me","ifEdit","friendCount","getUserBase","saveMsg","undefined","publish","disabled","visibility","detail","commentList","commentVisible","ifPraise","togglePraise","toggleComment","getNoteDetail","a","getComment","handleComment","target","handleEnter","keyCode","commitComment","deleteComment","cid","LikeFilled","cursor","MessageFilled","onKeyDown","onChange","commenter","ifPublish","commitNote","publishNote","handleTag","handleTitle","handleContent","defaultValue","Option","TextArea","autoSize","minRows","maxRows","goBack","mainRoutes","Home","Note","Friend","Me","Detail","Publish","Login","Main","App","ReactDOM","StrictMode","getElementById"],"mappings":"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","file":"static/js/main.bfd34ed5.chunk.js","sourcesContent":["// 存放全局变量\r\nconst global = {\r\n    user: {\r\n        name: '',\r\n        pwd: '',\r\n        uid: -1,\r\n    },\r\n    tagArr: [\r\n        // {\r\n        //     color: \"#2db7f5\",\r\n        //     tag: \"学习\",\r\n        //     tid: 1,\r\n        // },\r\n        // {\r\n        //     color: \"#cf1322\",\r\n        //     tag: \"生活\",\r\n        //     tid: 2,\r\n        // },\r\n        // {\r\n        //     color: \"#87d068\",\r\n        //     tag: \"美食\",\r\n        //     tid: 3,\r\n        // },\r\n        // {\r\n        //     color: \"#333\",\r\n        //     tag: \"其他\",\r\n        //     tid: 4,\r\n        // }\r\n    ]\r\n}\r\n\r\nexport default global;","import React, { Component } from \"react\";\r\nimport Pubsub from \"pubsub-js\";\r\nimport { NavLink, withRouter, Link } from \"react-router-dom\";\r\nimport global from \"../../store/index\";\r\nimport { Modal } from \"antd\";\r\nimport \"./header.scss\";\r\n\r\nclass header extends Component {\r\n  state = {\r\n    name: \"\",\r\n    ifLogin: false,\r\n  };\r\n\r\n  handleExit = () => {\r\n    const { ifLogin } = this.state;\r\n\r\n    Modal.confirm({\r\n      title: \"确认退出\",\r\n      okText: \"确认\",\r\n      cancelText: \"取消\",\r\n      onOk: () => {\r\n        this.props.history.replace(\"/login\");\r\n        global.user.uid = -1;\r\n        global.user.name = \"\";\r\n        global.user.pwd = \"\";\r\n        this.setState({ ifLogin: !ifLogin });\r\n      },\r\n    });\r\n  };\r\n\r\n  componentWillMount() {\r\n    const { user } = global;\r\n    if (user.uid !== -1) {\r\n      this.setState({\r\n        ifLogin: true,\r\n        name: user.name,\r\n      });\r\n    }\r\n  }\r\n\r\n  componentDidMount() {\r\n    // 订阅\r\n    this.token = Pubsub.subscribe(\"update\", (msg, data) => {\r\n      // const {name} = data;\r\n      this.setState(data);\r\n    });\r\n  }\r\n\r\n  componentWillUnmount() {\r\n    // 取消订阅\r\n    Pubsub.unsubscribe(this.token);\r\n  }\r\n\r\n  render() {\r\n    const { ifLogin, name } = this.state;\r\n    return (\r\n      <div className=\"header\">\r\n        <div className=\"logo_wrap\">\r\n          <h1>论坛系统</h1>\r\n          {/* <img src=\"\" alt=\"\" /> */}\r\n        </div>\r\n        <div className=\"nav\">\r\n          <NavLink to=\"/main/home\" className=\"item\">\r\n            首页\r\n          </NavLink>\r\n          <NavLink to=\"/main/note\" className=\"item\">\r\n            创作\r\n          </NavLink>\r\n          <NavLink to=\"/main/friend\" className=\"item\">\r\n            好友\r\n          </NavLink>\r\n          <NavLink to=\"/main/me\" className=\"item\">\r\n            个人中心\r\n          </NavLink>\r\n        </div>\r\n        <div className=\"tip_wrap\">\r\n          <div style={{ display: ifLogin ? \"\" : \"none\" }}>\r\n            {name}，欢迎你！\r\n            <span onClick={this.handleExit}>退出</span>\r\n          </div>\r\n          <Link style={{ display: ifLogin ? \"none\" : \"\" }} to=\"/login\">\r\n            登录 | 注册\r\n          </Link>\r\n        </div>\r\n      </div>\r\n    );\r\n  }\r\n}\r\n\r\nexport default withRouter(header);\r\n","import React, { Component } from 'react';\r\nimport './footer.scss';\r\n\r\nexport default class footer extends Component {\r\n    render() {\r\n        return (\r\n            <div className=\"footer\">\r\n                版权所有 xhw\r\n            </div>\r\n        )\r\n    }\r\n}\r\n","import React, { Component } from \"react\";\r\nimport { Switch, Route, Redirect } from \"react-router-dom\";\r\nimport Header from \"../../component/header/header\";\r\nimport Footer from \"../../component/footer/footer\";\r\nimport { mainRoutes as routes } from \"../../routes/index\";\r\nimport \"./main.scss\";\r\nexport default class main extends Component {\r\n  render() {\r\n    return (\r\n      <div className=\"main\">\r\n        <Header></Header>\r\n        <div className=\"main_wrap\">\r\n          <Switch>\r\n            {routes.map((r) => {\r\n              return (\r\n                <Route\r\n                  key={r.path}\r\n                  path={r.path}\r\n                  component={r.component}\r\n                  exact={r.exact}\r\n                ></Route>\r\n              );\r\n            })}\r\n            <Redirect to=\"/main/home\"></Redirect>\r\n          </Switch>\r\n        </div>\r\n        <Footer></Footer>\r\n      </div>\r\n    );\r\n  }\r\n}\r\n","export function checkValIsNull(val) {\r\n    return val === '' || val.length === 0;\r\n}\r\n\r\n","import axios from 'axios';\r\nimport { message } from 'antd';\r\n\r\nconst BASE = 'http://localhost:8000';\r\n\r\nexport default function ajax(url, data = {}, type = 'GET') {\r\n    let baseURL = BASE + url;\r\n    const hide = message.loading('Loading...', 0);\r\n    return new Promise((resolve, reject) => {\r\n        let promise;\r\n        if (type === 'GET') {\r\n            promise = axios.get(baseURL, { params: data });\r\n        } else {\r\n            promise = axios.post(baseURL, data);\r\n        }\r\n        promise.then(res => {\r\n            resolve(res.data);\r\n        }).catch(err => {\r\n            reject(err)\r\n        }).finally(() => {\r\n            // Dismiss manually and asynchronously\r\n            setTimeout(hide, 0);\r\n        })\r\n    })\r\n}","import React, { Component } from \"react\";\r\nimport { Input, Button, message } from \"antd\";\r\nimport { EyeTwoTone, EyeInvisibleOutlined } from \"@ant-design/icons\";\r\nimport { checkValIsNull } from \"../../utils/check\";\r\nimport ajax from \"../../api/ajax\";\r\nimport global from \"../../store/index\";\r\nimport \"./login.scss\";\r\n\r\nexport default class login extends Component {\r\n  state = {\r\n    loginModal: true,\r\n    imgURL: \"\",\r\n  };\r\n\r\n  // 登录\r\n  handleLogin = () => {\r\n    const {\r\n      name: {\r\n        state: { value: name = \"\" },\r\n      },\r\n      pwd: {\r\n        state: { value: pwd = \"\" },\r\n      },\r\n      code: {\r\n        state: { value: code = \"\" },\r\n      },\r\n    } = this;\r\n    console.log(name, pwd, code);\r\n    if (checkValIsNull(name)) return message.info(\"用户名不能为空！\", 1);\r\n    if (checkValIsNull(pwd)) return message.info(\"密码不能为空！\", 1);\r\n    if (checkValIsNull(code)) return message.info(\"验证码不能为空！\", 1);\r\n\r\n    ajax(\"/login\", { name, pwd, code: code.toLowerCase() }, \"POST\")\r\n      .then((res) => {\r\n        const { status, msg, data } = res;\r\n        if (status !== 1) return message.error(msg, 1);\r\n        // 登陆成功\r\n        message.success(msg, 1);\r\n        const { name, pwd, id } = data;\r\n        global.user.name = name;\r\n        global.user.pwd = pwd;\r\n        global.user.uid = id;\r\n        setTimeout(() => this.props.history.push(\"/main/\"), 500);\r\n      })\r\n      .catch((err) => {\r\n        message.error(\"服务器内部错误\", 1);\r\n      });\r\n  };\r\n\r\n  // 处理注册\r\n  handleRegister = () => {\r\n    const {\r\n      rname: {\r\n        state: { value: name = \"\" },\r\n      },\r\n      rpwd: {\r\n        state: { value: pwd = \"\" },\r\n      },\r\n      rnpwd: {\r\n        state: { value: npwd = \"\" },\r\n      },\r\n    } = this;\r\n\r\n    console.log(name, pwd, npwd);\r\n    if (checkValIsNull(name)) return message.info(\"用户名不能为空！\", 1);\r\n    if (checkValIsNull(pwd)) return message.info(\"密码不能为空！\", 1);\r\n    if (pwd !== npwd) return message.info(\"输入的密码不一致\", 1);\r\n    ajax(\"/register\", { name, pwd }, \"POST\")\r\n      .then((res) => {\r\n        const { msg, status } = res;\r\n        if (status !== 1) return message.error(msg, 1);\r\n        // 注册成功\r\n        message.success(msg, 1);\r\n        this.rname.state.value = \"\";\r\n        this.rpwd.state.value = \"\";\r\n        this.rnpwd.state.value = \"\";\r\n      })\r\n      .catch((err) => {\r\n        message.error(\"服务器内部错误\", 1);\r\n      });\r\n  };\r\n\r\n  // 获取验证码\r\n  getCode = () => {\r\n    ajax(\"/code\")\r\n      .then((res) => {\r\n        const { data } = res;\r\n        this.setState({ imgURL: data });\r\n        let img = document.querySelector(\".imgPic\");\r\n        img.innerHTML = data;\r\n      })\r\n      .catch((err) => {\r\n        console.log(err);\r\n        message.error(\"服务器内部错误\", 1);\r\n      });\r\n  };\r\n\r\n  // 开关\r\n  toggleBtn = () => {\r\n    const { loginModal } = this.state;\r\n    // 登陆页面呈现时，重新获取验证码\r\n    if(!loginModal) this.getCode();\r\n    this.setState({ loginModal: !loginModal });\r\n  };\r\n\r\n  componentWillMount() {\r\n    this.getCode();\r\n  }\r\n\r\n  render() {\r\n    const { loginModal } = this.state;\r\n\r\n    return (\r\n      <div className=\"login\">\r\n        {loginModal && (\r\n          <div className=\"login_wrap\">\r\n            <h3>用户登录</h3>\r\n            <div className=\"user\">\r\n              <span>用户名</span>\r\n              <Input\r\n                ref={(c) => (this.name = c)}\r\n                style={{ width: \"70%\" }}\r\n              ></Input>\r\n            </div>\r\n            <div className=\"pwd\">\r\n              <span>密码</span>\r\n              <Input.Password\r\n                ref={(c) => (this.pwd = c)}\r\n                iconRender={(visible) =>\r\n                  visible ? <EyeTwoTone /> : <EyeInvisibleOutlined />\r\n                }\r\n                style={{ width: \"70%\" }}\r\n              ></Input.Password>\r\n            </div>\r\n            <div className=\"code\">\r\n              <span>验证码</span>\r\n              <div style={{ width: \"70%\" }}>\r\n                <Input\r\n                  ref={(c) => (this.code = c)}\r\n                  style={{ width: \"50%\" }}\r\n                ></Input>\r\n                <div className=\"imgPic\" onClick={this.getCode}>\r\n                  获取验证码\r\n                </div>\r\n                {/* <img className=\"img\" src={imgURL} alt=\"验证码\" /> */}\r\n              </div>\r\n            </div>\r\n            <div className=\"to\">\r\n              <span onClick={this.toggleBtn}>还未注册，前往注册→</span>\r\n            </div>\r\n            <div className=\"submit\">\r\n              <Button type=\"primary\" size=\"large\" onClick={this.handleLogin}>\r\n                登录\r\n              </Button>\r\n            </div>\r\n          </div>\r\n        )}\r\n        {!loginModal && (\r\n          <div className=\"reg_wrap\">\r\n            <h3>用户注册</h3>\r\n            <div className=\"user\">\r\n              <span>用户名</span>\r\n              <Input\r\n                ref={(c) => (this.rname = c)}\r\n                style={{ width: \"70%\" }}\r\n              ></Input>\r\n            </div>\r\n            <div className=\"pwd\">\r\n              <span>密码</span>\r\n              <Input.Password\r\n                ref={(c) => (this.rpwd = c)}\r\n                iconRender={(visible) =>\r\n                  visible ? <EyeTwoTone /> : <EyeInvisibleOutlined />\r\n                }\r\n                style={{ width: \"70%\" }}\r\n              ></Input.Password>\r\n            </div>\r\n            <div className=\"pwd\">\r\n              <span>确认新密码</span>\r\n              <Input.Password\r\n                ref={(c) => (this.rnpwd = c)}\r\n                iconRender={(visible) =>\r\n                  visible ? <EyeTwoTone /> : <EyeInvisibleOutlined />\r\n                }\r\n                style={{ width: \"70%\" }}\r\n              ></Input.Password>\r\n            </div>\r\n            <div className=\"to\">\r\n              <span onClick={this.toggleBtn}>已有帐号，前往登录→</span>\r\n            </div>\r\n            <div className=\"submit\">\r\n              <Button type=\"primary\" size=\"large\" onClick={this.handleRegister}>\r\n                注册\r\n              </Button>\r\n            </div>\r\n          </div>\r\n        )}\r\n      </div>\r\n    );\r\n  }\r\n}\r\n","import React, { Component } from \"react\";\r\nimport { withRouter } from \"react-router-dom\";\r\nimport { Tag } from \"antd\";\r\nimport { UserOutlined, MessageOutlined, LikeOutlined } from \"@ant-design/icons\";\r\nimport \"./noteItem.scss\";\r\n\r\nclass noteItem extends Component {\r\n  state = {\r\n    note: {\r\n      author: \"**\",\r\n      color: \"\",\r\n      comment: \"-\",\r\n      content: \"********\",\r\n      date: \"2021-12-13\",\r\n      nid: -1,\r\n      praise: \"-\",\r\n      tag: \"其他\",\r\n      tid: -1,\r\n      title: \"**\",\r\n      uid: -1,\r\n    },\r\n  };\r\n\r\n  goDetail = (nid) => {\r\n    this.props.history.push({ pathname: \"/main/detail\", query: { nid } });\r\n  };\r\n\r\n  render() {\r\n    const { note: base } = this.state;\r\n    let { note } = this.props;\r\n    // 如果对象为空，赋予原始值\r\n    if (Object.getOwnPropertyNames(note).length === 0) {\r\n      note = base;\r\n    }\r\n    return (\r\n      <div className=\"note_item\">\r\n        <div className=\"top\">\r\n          <h3 className=\"title\" onClick={() => this.goDetail(note.nid)}>\r\n            {note.title}\r\n          </h3>\r\n          <Tag color={note.color}>{note.tag}</Tag>\r\n        </div>\r\n        <div className=\"author\">\r\n          <UserOutlined />\r\n          <span className=\"name\">{note.author}</span>\r\n        </div>\r\n        <div className=\"content\">\r\n          {note.content}\r\n          {/* 我是你法回放v年底规划发hi算法发滴哦覅会发生方法对付大大方方\r\n          我是你法回放v年底规划发hi算法发滴哦覅会发生方法对付大大方方\r\n          我是你法回放v年底规划发hi算法发滴哦覅会发生方法对付大大方方\r\n          我是你法回放v年底规划发hi算法发滴哦覅会发生方法对付大大方方\r\n          我是你法回放v年底规划发hi算法发滴哦覅会发生方法对付大大方方\r\n          我是你法回放v年底规划发hi算法发滴哦覅会发生方法对付大大方方\r\n          我是你法回放v年底规划发hi算法发滴哦覅会发生方法对付大大方方\r\n        */}\r\n        </div>\r\n        <div className=\"bottom\">\r\n          <div className=\"date\">{note.date}</div>\r\n          <div className=\"comment\">\r\n            <MessageOutlined /> {note.comment}\r\n          </div>\r\n          <div className=\"praise\">\r\n            <LikeOutlined /> {note.praise}\r\n          </div>\r\n        </div>\r\n      </div>\r\n    );\r\n  }\r\n}\r\n\r\nexport default withRouter(noteItem);\r\n","import React, { Component } from \"react\";\r\nimport { Input, message } from \"antd\";\r\nimport NoteItem from \"../../component/noteItem/noteItem\";\r\nimport ajax from \"../../api/ajax\";\r\nimport global from \"../../store/index\";\r\nimport { checkValIsNull } from \"../../utils/check\";\r\nimport \"./home.scss\";\r\n\r\nconst { Search } = Input;\r\n\r\nexport default class home extends Component {\r\n  state = {\r\n    // 标签列表\r\n    tagList: [\r\n      {\r\n        tid: -1,\r\n        tag: \"全部\",\r\n        color: \"black\",\r\n      },\r\n      // {\r\n      //   tid: 1,\r\n      //   title: \"学习\",\r\n      //   color: \"black\",\r\n      // },\r\n      // {\r\n      //   tid: 2,\r\n      //   title: \"生活\",\r\n      //   color: \"black\",\r\n      // },\r\n      // {\r\n      //   tid: 3,\r\n      //   title: \"美食\",\r\n      //   color: \"black\",\r\n      // },\r\n      // {\r\n      //   tid: 4,\r\n      //   title: \"其他\",\r\n      //   color: \"black\",\r\n      // },\r\n    ],\r\n    // 当前标签索引\r\n    curIndex: 0,\r\n    // 贴文列表\r\n    noteList: [\r\n      // {\r\n      //   author: \"xhw\",\r\n      //   color: \"red\",\r\n      //   comment: 2,\r\n      //   content: \"打发打发\",\r\n      //   date: \"2021-12-08\",\r\n      //   nid: 1,\r\n      //   praise: 1,\r\n      //   tag: \"生活\",\r\n      //   tid: 2,\r\n      //   title: \"合肥\",\r\n      //   uid: 1,\r\n      // },\r\n      {},\r\n    ],\r\n  };\r\n\r\n  // 搜索内容\r\n  onSearch = (key) => {\r\n    console.log(key);\r\n    if (checkValIsNull(key)) return message.error(\"请输入内容\", 1);\r\n    ajax(\"/notelist\", { key })\r\n      .then((res) => {\r\n        console.log(res);\r\n        const { data, status, msg } = res;\r\n        if (status !== 1) return message.error(msg);\r\n        message.success(\"搜索结果已展示\");\r\n        this.setState({ noteList: data, curIndex: -1 });\r\n      })\r\n      .catch((err) => {\r\n        console.log(err);\r\n        message.error(\"服务器内部错误\");\r\n      });\r\n  };\r\n\r\n  // 切换标签\r\n  changeTag = (index) => {\r\n    const { tagList } = this.state;\r\n    this.setState({ curIndex: index });\r\n    ajax(\"/notelist\", index === 0 ? {} : { tid: tagList[index].tid })\r\n      .then((res) => {\r\n        console.log(res);\r\n        const { data, status, msg } = res;\r\n        if (status !== 1) return message.error(msg);\r\n        message.success(\"获取贴文成功\", 1);\r\n        this.setState({ noteList: data });\r\n        console.log(this.state.noteList);\r\n      })\r\n      .catch((err) => {\r\n        message.error(\"服务器错误\", 1);\r\n      });\r\n  };\r\n\r\n  // 获取标签列表\r\n  reqTagList = () => {\r\n    ajax(\"/taglist\")\r\n      .then((res) => {\r\n        const { tagList } = this.state;\r\n        console.log(res, tagList);\r\n        const { data: tag, status, msg } = res;\r\n\r\n        if (status !== 1) return message.error(msg);\r\n        this.setState({ tagList: [...tagList, ...tag] });\r\n        global.tagArr = tag;\r\n        message.success(\"获取分区成功\", 0.5);\r\n      })\r\n      .catch((err) => {\r\n        message.error(\"服务器内部错误\", 1);\r\n      });\r\n  };\r\n\r\n  // 获取贴文情况\r\n  reqNoteList = (uid = -1) => {\r\n    if (uid !== -1) this.setState({ curIndex: -1 });\r\n    ajax(\"/notelist\", uid === -1 ? {} : { uid })\r\n      .then((res) => {\r\n        const { data: noteList, status, msg } = res;\r\n        if (status !== 1) return message.error(msg);\r\n        message.success(\"获取贴文成功\", 1);\r\n        this.setState({ noteList });\r\n      })\r\n      .catch((err) => {\r\n        message.error(\"服务器内部错误\", 1);\r\n      });\r\n  };\r\n\r\n  componentWillMount() {\r\n    this.reqTagList();\r\n    const { location } = this.props;\r\n    let id = -1;\r\n    if (\"query\" in location) {\r\n      const { uid } = location.query;\r\n      id = uid;\r\n    }\r\n    this.reqNoteList(id);\r\n  }\r\n\r\n  render() {\r\n    const { tagList, curIndex, noteList } = this.state;\r\n    return (\r\n      <div className=\"home\">\r\n        <div className=\"input_wrap\">\r\n          <Search\r\n            placeholder=\"输入关键字搜索贴文\"\r\n            onSearch={this.onSearch}\r\n            enterButton\r\n          />\r\n        </div>\r\n        <ul className=\"tag_wrap\">\r\n          {tagList.map((tag, index) => {\r\n            return (\r\n              <li\r\n                key={index}\r\n                onClick={() => this.changeTag(index)}\r\n                className={curIndex === index ? \"active\" : \"\"}\r\n              >\r\n                {tag.tag}\r\n              </li>\r\n            );\r\n          })}\r\n        </ul>\r\n        <div className=\"note_wrap\">\r\n          {!noteList.length && (\r\n            <div style={{ textAlign: \"center\" }}>暂无数据</div>\r\n          )}\r\n          {noteList.map((note, index) => {\r\n            return <NoteItem key={index} note={note}></NoteItem>;\r\n          })}\r\n        </div>\r\n      </div>\r\n    );\r\n  }\r\n}\r\n","import React, { Component } from \"react\";\r\nimport { Link } from \"react-router-dom\";\r\nimport { Button, Table, Space, Tag, Modal, message } from \"antd\";\r\nimport ajax from \"../../api/ajax\";\r\nimport global from \"../../store/index\";\r\nimport \"./note.scss\";\r\n\r\nexport default class note extends Component {\r\n  state = {\r\n    columns: [\r\n      {\r\n        title: \"标题\",\r\n        dataIndex: \"title\",\r\n        key: \"title\",\r\n      },\r\n      {\r\n        title: \"创作者\",\r\n        dataIndex: \"author\",\r\n        key: \"author\",\r\n      },\r\n      {\r\n        title: \"创作日期\",\r\n        dataIndex: \"date\",\r\n        key: \"date\",\r\n      },\r\n      {\r\n        title: \"标签\",\r\n        dataIndex: \"tag\",\r\n        key: \"tag\",\r\n        render: (tag, note) => {\r\n          // console.log(tag, note);\r\n          return <Tag color={note.color}>{tag}</Tag>;\r\n        },\r\n      },\r\n      {\r\n        title: \"操作\",\r\n        key: \"action\",\r\n        align: \"center\",\r\n        render: (e) => (\r\n          <Space size=\"middle\">\r\n            <Button type=\"danger\" onClick={() => this.handleDelete(e)}>\r\n              删除\r\n            </Button>\r\n            <Button\r\n              type=\"primary\"\r\n              onClick={() =>\r\n                this.props.history.push({\r\n                  pathname: \"/main/publish\",\r\n                  query: { note: e },\r\n                })\r\n              }\r\n            >\r\n              修改\r\n            </Button>\r\n            <Button onClick={() => this.showMore(e)}>更多</Button>\r\n          </Space>\r\n        ),\r\n      },\r\n    ],\r\n    noteList: [\r\n      // {\r\n      //   key: '1',\r\n      //   title: \"合肥\",\r\n      //   author: \"xhw\",\r\n      //   date: \"2021-12-08\",\r\n      //   tag: \"生活\",\r\n      // },\r\n    ],\r\n  };\r\n\r\n  // 删除贴文\r\n  handleDelete = (e) => {\r\n    console.log(e);\r\n    Modal.confirm({\r\n      title: `确认删除《${e.title}》贴文`,\r\n      okText: \"确认\",\r\n      cancelText: \"取消\",\r\n      onOk: () => {\r\n        const { user } = global;\r\n        ajax(\"/deletenote\", { nid: e.nid, uid: user.uid }, \"POST\")\r\n          .then((res) => {\r\n            console.log(res);\r\n            const { status, msg } = res;\r\n            if (status !== 1) return message.error(msg, 1);\r\n            message.success(`已删除《${e.title}》贴文`, 1);\r\n            this.getMyNote(user.uid);\r\n          })\r\n          .catch((err) => {\r\n            if (user.uid === -1) {\r\n              message.info(\"请先登录！\", 1);\r\n            } else {\r\n              message.error(\"服务器内部错误\", 1);\r\n            }\r\n          });\r\n      },\r\n    });\r\n  };\r\n\r\n  //显示更多\r\n  showMore = (e) => {\r\n    console.log(e);\r\n    const { nid } = e;\r\n    this.props.history.push({ pathname: \"/main/detail\", query: { nid } });\r\n  };\r\n\r\n  // 获取贴文\r\n  getMyNote = (uid) => {\r\n    ajax(\"/notelist\", { uid })\r\n      .then((res) => {\r\n        console.log(res);\r\n        const { status, data, msg } = res;\r\n        if (status !== 1) return message.error(msg, 1);\r\n        const noteList = data.map((note, index) => {\r\n          return {\r\n            ...note,\r\n            key: +index + 1,\r\n          };\r\n        });\r\n        this.setState({ noteList });\r\n        // message.success(\"获取贴文成功\", 1);\r\n      })\r\n      .catch((err) => {\r\n        message.error(\"服务器内部错误\",1);\r\n      });\r\n  };\r\n\r\n  componentWillMount() {\r\n    const {user} = global;\r\n    this.getMyNote(user.uid);\r\n  }\r\n\r\n  render() {\r\n    const { columns, noteList } = this.state;\r\n    console.log(noteList);\r\n    return (\r\n      <div className=\"note\">\r\n        <div className=\"top\">\r\n          <h3>我发布的贴文</h3>\r\n          <Link to=\"/main/publish\">\r\n            <Button type=\"primary\">+ 写贴文</Button>\r\n          </Link>\r\n        </div>\r\n        <div className=\"note_wrap\">\r\n          <Table\r\n            pagination={false}\r\n            columns={columns}\r\n            dataSource={noteList}\r\n            bordered\r\n          ></Table>\r\n        </div>\r\n      </div>\r\n    );\r\n  }\r\n}\r\n","import React, { Component } from \"react\";\r\nimport { List, Avatar, Button, Modal, message, Input, Table } from \"antd\";\r\nimport {UserOutlined} from '@ant-design/icons';\r\nimport ajax from \"../../api/ajax\";\r\nimport global from \"../../store/index\";\r\nimport \"./friend.scss\";\r\n\r\nexport default class friend extends Component {\r\n  state = {\r\n    friendList: [\r\n      // {\r\n      //   uid: 1,\r\n      //   name: \"xhw\",\r\n      // },\r\n      // {\r\n      //   uid: 2,\r\n      //   name: \"xhw233\",\r\n      // },\r\n    ],\r\n    friendModal: false, //好友搜索展示框\r\n    // 搜索好友展示用\r\n    columns: [\r\n      {\r\n        title: \"用户\",\r\n        dataIndex: \"name\",\r\n        key: \"name\",\r\n      },\r\n      {\r\n        title: \"操作\",\r\n        key: \"action\",\r\n        align: \"center\",\r\n        render: (e) => (\r\n          <Button type=\"primary\" onClick={() => this.addFriend(e)}>\r\n            添加\r\n          </Button>\r\n        ),\r\n      },\r\n    ],\r\n    userList: [\r\n      {\r\n        key: \"1\",\r\n        name: \"xhw\",\r\n      },\r\n    ],\r\n  };\r\n\r\n  //   删除好友\r\n  handleDelete = (e) => {\r\n    console.log(e);\r\n    Modal.confirm({\r\n      title: `确认删除好友${e.name}`,\r\n      okText: \"确认\",\r\n      cancelText: \"取消\",\r\n      onOk: () => {\r\n        // this.props.history.replace(\"/login\");\r\n        const { user } = global;\r\n        ajax(\"/deletefriend\", { uid: user.uid, fid: e.id }, \"POST\")\r\n          .then((res) => {\r\n            console.log(res);\r\n            const { status, msg } = res;\r\n            if (status !== 1) return message.error(msg, 1);\r\n            message.success(`已删除好友${e.name}`, 1);\r\n            this.getFriendList(user.uid);\r\n          })\r\n          .catch((err) => {\r\n            if (user.uid === -1) {\r\n              message.info(\"请先登录！\", 1);\r\n            } else {\r\n              message.error(\"服务器内部错误\", 1);\r\n            }\r\n          });\r\n      },\r\n    });\r\n  };\r\n\r\n  //   查看好友更多信息\r\n  goFriend = (e) => {\r\n    this.props.history.push({\r\n      pathname: \"/main/home/\",\r\n      query: { uid: e.id },\r\n    });\r\n  };\r\n\r\n  // 添加好友\r\n  addFriend = (e) => {\r\n    const { user } = global;\r\n    console.log(e);\r\n    if (e.id === user.uid) return message.error(\"不能添加自己为好友\");\r\n    ajax(\"/addfriend\", { uid: user.uid, fid: e.id }, \"POST\")\r\n      .then((res) => {\r\n        const { msg, status } = res;\r\n        if (status !== 1) return message.info(msg, 1);\r\n        message.success(msg, 1);\r\n        this.getFriendList(user.uid);\r\n      })\r\n      .catch((err) => {\r\n        message.error(\"服务器内部错误\", 1);\r\n      });\r\n  };\r\n\r\n  // 开关\r\n  toggleModal = () => {\r\n    const { friendModal } = this.state;\r\n    // 清空数据\r\n    if (this.searchVal) this.searchVal.state.value = \"\";\r\n    this.setState({\r\n      friendModal: !friendModal,\r\n      userList: [],\r\n    });\r\n  };\r\n\r\n  //   搜索好友\r\n  onSearch = (e) => {\r\n    console.log(e);\r\n    ajax(\"/searchuser\", { key: e }, \"POST\")\r\n      .then((res) => {\r\n        console.log(res);\r\n        let { data, status, msg } = res;\r\n        if (status !== 1) return message.error(msg, 1);\r\n        data = data.map((user, index) => {\r\n          return {\r\n            key: index,\r\n            ...user,\r\n          };\r\n        });\r\n        this.setState({ userList: data });\r\n      })\r\n      .catch((err) => {\r\n        message.error(\"服务器内部错误\", 1);\r\n      });\r\n  };\r\n\r\n  // 获取好友列表\r\n  getFriendList = (uid) => {\r\n    ajax(\"/friendlist\", { uid })\r\n      .then((res) => {\r\n        console.log(res);\r\n        const { status, msg, data } = res;\r\n        if (status !== 1) return message.error(msg, 1);\r\n        // message.success(\"获取好友列表成功\", 1);\r\n        this.setState({ friendList: data });\r\n      })\r\n      .catch((err) => {\r\n        message.error(\"服务器内部错误\", 1);\r\n      });\r\n  };\r\n\r\n  componentWillMount() {\r\n    // 获取用户id\r\n    const { user } = global;\r\n    this.getFriendList(user.uid);\r\n  }\r\n\r\n  render() {\r\n    const { friendList, friendModal, columns, userList } = this.state;\r\n    return (\r\n      <div className=\"friend\">\r\n        <div className=\"top\">\r\n          <h3>好友列表</h3>\r\n          <Button onClick={this.toggleModal}>添加好友</Button>\r\n        </div>\r\n        <List\r\n          className=\"friend_list\"\r\n          dataSource={friendList}\r\n          size=\"large\"\r\n          bordered\r\n          renderItem={(item) => (\r\n            <List.Item\r\n              actions={[\r\n                <Button\r\n                  onClick={(e) => {\r\n                    e.preventDefault();\r\n                    this.handleDelete(item);\r\n                  }}\r\n                  type=\"danger\"\r\n                >\r\n                  删除\r\n                </Button>,\r\n                <Button\r\n                  onClick={(e) => {\r\n                    e.preventDefault();\r\n                    this.goFriend(item);\r\n                  }}\r\n                  type=\"primary\"\r\n                >\r\n                  更多\r\n                </Button>,\r\n              ]}\r\n            >\r\n              <List.Item.Meta\r\n                avatar={<Avatar icon={<UserOutlined />}/>}\r\n                title={item.name}\r\n                description=\"此用户很赖，没有介绍\"\r\n              />\r\n            </List.Item>\r\n          )}\r\n        />\r\n        {/* 好友拟态框 */}\r\n        <Modal\r\n          title=\"添加好友\"\r\n          visible={friendModal}\r\n          onCancel={this.toggleModal}\r\n          footer={[\r\n            <Button key=\"back\" onClick={this.toggleModal}>\r\n              取消\r\n            </Button>,\r\n          ]}\r\n        >\r\n          <div id=\"friend_wrap\">\r\n            <Input.Search\r\n              placeholder=\"输入关键字搜索好友\"\r\n              ref={(c) => (this.searchVal = c)}\r\n              onSearch={this.onSearch}\r\n              // allowClear\r\n              enterButton\r\n            />\r\n            <Table\r\n              className=\"table\"\r\n              pagination={false}\r\n              columns={columns}\r\n              dataSource={userList}\r\n              bordered\r\n            ></Table>\r\n          </div>\r\n        </Modal>\r\n      </div>\r\n    );\r\n  }\r\n}\r\n","import React, { Component } from \"react\";\r\nimport { Chart, Util } from \"@antv/g2\";\r\nimport \"./pieChart.scss\";\r\n\r\nexport default class pieChart extends Component {\r\n  state = {};\r\n\r\n  componentWillMount() {\r\n  }\r\n\r\n  componentWillReceiveProps(nextProps) {\r\n    const { noteTotal, classify } = nextProps;\r\n    if (nextProps.noteTotal !== this.props.noteTotal) {\r\n      this.pieRender(classify, noteTotal);\r\n    }\r\n  }\r\n\r\n  componentDidMount() {\r\n  }\r\n\r\n  pieRender = (classify, noteTotal) => {\r\n    const data = classify.map((item) => {\r\n      return {\r\n        type: item.tag,\r\n        value: item.count,\r\n      };\r\n    });\r\n    const chart = new Chart({\r\n      container: \"container\",\r\n      autoFit: true,\r\n      height: 300,\r\n      // padding: [20, 10, 20, 10],\r\n    });\r\n\r\n    chart.data(data);\r\n\r\n    chart.coordinate(\"theta\", {\r\n      radius: 0.8,\r\n    });\r\n    chart.tooltip({\r\n      showMarkers: false,\r\n    });\r\n\r\n    chart\r\n      .interval()\r\n      .adjust(\"stack\")\r\n      .position(\"value\")\r\n      .color(\r\n        \"type\",\r\n        // [\"#063d8a\", \"#1770d6\", \"#47abfc\", \"#38c060\"]\r\n        classify.map((item) => {\r\n          return item.color;\r\n        })\r\n      )\r\n      .style({ opacity: 1 })\r\n      .state({\r\n        active: {\r\n          style: (element) => {\r\n            const shape = element.shape;\r\n            return {\r\n              matrix: Util.zoom(shape, 1.1),\r\n            };\r\n          },\r\n        },\r\n      })\r\n      .label(\"type\", (val) => {\r\n        return {\r\n          offset: -30,\r\n          style: {\r\n            opacity: 1,\r\n            fill: \"white\",\r\n            fontSize: 12,\r\n            shadowBlur: 2,\r\n            shadowColor: \"rgba(0, 0, 0, .45)\",\r\n          },\r\n          content: (obj) => {\r\n            return (\r\n              obj.type + \"\\n\" + Math.floor((obj.value / noteTotal) * 100) + \"%\"\r\n            );\r\n          },\r\n        };\r\n      });\r\n\r\n    // 可选择的样式\r\n    chart.interaction(\"element-single-selected\");\r\n    // 渲染\r\n    chart.render();\r\n  };\r\n\r\n  render() {\r\n    return <div id=\"container\"></div>;\r\n  }\r\n}\r\n","import React, { Component } from \"react\";\r\nimport Pubsub from 'pubsub-js';\r\nimport { Input, Button, Statistic, message } from \"antd\";\r\nimport { EyeTwoTone, EyeInvisibleOutlined } from \"@ant-design/icons\";\r\nimport Pie from \"../../component/pieChart/pieChart\";\r\nimport ajax from \"../../api/ajax\";\r\nimport global from \"../../store/index\";\r\nimport { checkValIsNull } from \"../../utils/check\";\r\nimport \"./me.scss\";\r\n\r\nexport default class me extends Component {\r\n  state = {\r\n    name: \"test\", //用户名\r\n    ifEdit: false, //是否可以编辑\r\n    friendCount: 0, //好友数\r\n    noteTotal: 0, //贴文总数\r\n    // 贴文分类情况\r\n    classify: [],\r\n  };\r\n\r\n  // 控制开关\r\n  toggleBtn = () => {\r\n    const { ifEdit } = this.state;\r\n    this.setState({ ifEdit: !ifEdit });\r\n  };\r\n\r\n  // 获取用户基本情况\r\n  getUserBase = (uid) => {\r\n    ajax(\"/base\", { uid }, \"POST\")\r\n      .then((res) => {\r\n        console.log(res);\r\n        const { status, msg, data } = res;\r\n        if (status !== 1) return message.error(msg, 1);\r\n        message.success(\"获取用户基本情况成功\", 1);\r\n        const { friendCount, noteTotal, classify } = data;\r\n        this.setState({ friendCount, noteTotal, classify });\r\n      })\r\n      .catch((err) => {\r\n        if (uid === -1) {\r\n          message.info(\"请先登录！\", 1);\r\n        } else {\r\n          message.error(\"服务器内部错误\", 1);\r\n        }\r\n      });\r\n  };\r\n\r\n  // 保存信息\r\n  saveMsg = () => {\r\n    console.log(this);\r\n    const {\r\n      name: {\r\n        state: { value: name },\r\n      },\r\n      pwd: {\r\n        state: { value: pwd },\r\n      },\r\n      npwd: {\r\n        state: { value: npwd },\r\n      },\r\n    } = this;\r\n    if (name === undefined || checkValIsNull(name))\r\n      return message.error(\"用户名不能为空\", 1);\r\n    if (pwd === undefined || checkValIsNull(pwd))\r\n      return message.error(\"密码不能为空\", 1);\r\n    if (npwd === undefined || checkValIsNull(npwd))\r\n      return message.error(\"新密码不能为空\", 1);\r\n    if (pwd !== npwd) return message.error(\"两次密码不一致\", 1);\r\n\r\n    const { user } = global;\r\n    const data = {\r\n      name,\r\n      pwd,\r\n      uid: user.uid,\r\n    };\r\n\r\n    ajax(\"/updateuser\", data, \"POST\")\r\n      .then((res) => {\r\n        console.log(res);\r\n        const { status, msg } = res;\r\n        if (status !== 1) return message.error(msg, 1);\r\n        message.success(msg, 1);\r\n        // 成功修改用户的逻辑\r\n        global.user.name = name;\r\n        global.user.pwd = pwd;\r\n        this.setState({ name });\r\n        this.toggleBtn();\r\n\r\n        // 通知头部组件名字信息修改了\r\n        Pubsub.publish(\"update\", {name:name});\r\n      })\r\n      .catch((err) => {\r\n        // message.error(err);\r\n        message.error(\"服务器内部错误\", 1);\r\n      });\r\n  };\r\n\r\n  componentWillMount() {\r\n    const { user } = global;\r\n    console.log(this);\r\n    this.getUserBase(user.uid);\r\n    this.setState({ name: user.name });\r\n  }\r\n\r\n  componentDidMount() {\r\n    const { user } = global;\r\n    console.log(global.tagArr);\r\n    this.name.state.value = user.name;\r\n    this.pwd.state.value = user.pwd;\r\n  }\r\n\r\n  render() {\r\n    const { name, friendCount, noteTotal, classify, ifEdit } = this.state;\r\n    return (\r\n      <div className=\"me\">\r\n        <div className=\"title\">\r\n          <h3>{name} 的个人中心</h3>\r\n        </div>\r\n        <div className=\"base\">\r\n          <div className=\"left\">\r\n            <h4>用户基本情况</h4>\r\n            <div className=\"wrap\">\r\n              <Statistic className=\"item\" title=\"发帖总数\" value={noteTotal} />\r\n              <Statistic className=\"item\" title=\"好友数\" value={friendCount} />\r\n            </div>\r\n            <Pie noteTotal={noteTotal} classify={classify}></Pie>\r\n          </div>\r\n\r\n          <div className=\"message\">\r\n            <h4>用户基本资料</h4>\r\n            <div className=\"name\">\r\n              <span>用户名</span>\r\n              <Input\r\n                ref={(c) => (this.name = c)}\r\n                style={{ width: \"70%\" }}\r\n                disabled={!ifEdit}\r\n              ></Input>\r\n            </div>\r\n            <div className=\"pwd\">\r\n              <span>密码</span>\r\n              <Input.Password\r\n                ref={(c) => (this.pwd = c)}\r\n                iconRender={(visible) =>\r\n                  visible ? <EyeTwoTone /> : <EyeInvisibleOutlined />\r\n                }\r\n                disabled={!ifEdit}\r\n                style={{ width: \"70%\" }}\r\n              ></Input.Password>\r\n            </div>\r\n            <div\r\n              className=\"pwd\"\r\n              style={{\r\n                visibility: ifEdit ? \"visible\" : \"hidden\",\r\n              }}\r\n            >\r\n              <span>确认新密码</span>\r\n              <Input.Password\r\n                ref={(c) => (this.npwd = c)}\r\n                iconRender={(visible) =>\r\n                  visible ? <EyeTwoTone /> : <EyeInvisibleOutlined />\r\n                }\r\n                disabled={!ifEdit}\r\n                style={{ width: \"70%\" }}\r\n              ></Input.Password>\r\n            </div>\r\n            <div className=\"btn_wrap\">\r\n              <Button\r\n                className=\"btn\"\r\n                type=\"primary\"\r\n                style={{ display: ifEdit ? \"none\" : \"\" }}\r\n                onClick={this.toggleBtn}\r\n              >\r\n                修改\r\n              </Button>\r\n              <>\r\n                <Button\r\n                  className=\"btn\"\r\n                  style={{ display: ifEdit ? \"\" : \"none\" }}\r\n                  onClick={this.toggleBtn}\r\n                >\r\n                  取消\r\n                </Button>\r\n                <Button\r\n                  style={{ display: ifEdit ? \"\" : \"none\" }}\r\n                  className=\"btn\"\r\n                  type=\"primary\"\r\n                  onClick={this.saveMsg}\r\n                >\r\n                  保存\r\n                </Button>\r\n              </>\r\n            </div>\r\n          </div>\r\n        </div>\r\n      </div>\r\n    );\r\n  }\r\n}\r\n","import React, { Component } from \"react\";\r\nimport { Tag, List, Avatar, Input, Button, message, Modal } from \"antd\";\r\nimport { LikeFilled, MessageFilled,UserOutlined } from \"@ant-design/icons\";\r\nimport ajax from \"../../api/ajax\";\r\nimport global from \"../../store/index\";\r\nimport { checkValIsNull } from \"../../utils/check\";\r\nimport \"./detail.scss\";\r\n\r\nexport default class detail extends Component {\r\n  state = {\r\n    // 评论区\r\n    commentList: [\r\n      // {\r\n      //   cid: -1,\r\n      //   commenter: \"***\",\r\n      //   content: \"***\",\r\n      //   nid: -1,\r\n      //   uid: -1,\r\n      // },\r\n    ],\r\n    // 评论框\r\n    commentVisible: false,\r\n    // 点赞状态\r\n    ifPraise: false,\r\n    // 评论框内容\r\n    comment: \"\",\r\n    // 贴文详情\r\n    note: {\r\n      author: \"****\",\r\n      color: \"#333\",\r\n      comment: 2,\r\n      content: \"****\",\r\n      date: \"2021-12-08\",\r\n      nid: -1,\r\n      praise: 1,\r\n      tag: \"其他\",\r\n      tid: 4,\r\n      title: \"***\",\r\n      uid: 1,\r\n    },\r\n  };\r\n\r\n  //   控制点赞\r\n  togglePraise = () => {\r\n    const { ifPraise, note } = this.state;\r\n    const { user } = global;\r\n    const data = {\r\n      nid: note.nid,\r\n      uid: user.uid,\r\n    };\r\n    // 已是点赞状态，准备取消赞\r\n    if (ifPraise) {\r\n      ajax(\"/cancelpraise\", data, \"POST\")\r\n        .then((res) => {\r\n          console.log(res);\r\n          const { status, msg } = res;\r\n          if (status !== 1) return message.error(msg, 1);\r\n\r\n          message.success(msg, 1);\r\n          this.setState({ ifPraise: !ifPraise });\r\n        })\r\n        .catch((err) => {\r\n          if (user.uid === -1) {\r\n            message.info(\"请先登录！\", 1);\r\n          } else {\r\n            message.error(\"服务器内部错误\", 1);\r\n          }\r\n        });\r\n    }\r\n    // 已是没赞的状态，正准备点赞\r\n    else {\r\n      ajax(\"/praise\", data, \"POST\")\r\n        .then((res) => {\r\n          console.log(res);\r\n          const { status, msg } = res;\r\n          if (status !== 1) return message.error(msg, 1);\r\n\r\n          message.success(msg, 1);\r\n          this.setState({ ifPraise: !ifPraise });\r\n        })\r\n        .catch((err) => {\r\n          if (user.uid === -1) {\r\n            message.info(\"请先登录！\", 1);\r\n          } else {\r\n            message.error(\"服务器内部错误\", 1);\r\n          }\r\n        });\r\n    }\r\n  };\r\n\r\n  //   控制评论框显示\r\n  toggleComment = () => {\r\n    const { commentVisible } = this.state;\r\n    this.setState({ commentVisible: !commentVisible });\r\n  };\r\n\r\n  // 获取贴文有关信息\r\n  getNoteDetail = async (nid) => {\r\n    try {\r\n      const { user } = global;\r\n\r\n      // 贴文详情\r\n      {\r\n        const { status, msg, data } = await ajax(\"/notelist\", { nid });\r\n        if (status !== 1) return message.error(msg, 1);\r\n        this.setState({ note: data });\r\n      }\r\n\r\n      // 评论详情\r\n      this.getComment(nid);\r\n\r\n      // 点赞详情\r\n      {\r\n        const { status, msg, data } = await ajax(\"/ifpraise\", {\r\n          nid,\r\n          uid: user.uid,\r\n        });\r\n        if (status !== 1) return message.error(msg, 1);\r\n        this.setState({ ifPraise: data });\r\n      }\r\n\r\n      message.success(\"获取贴文详情成功\", 1);\r\n    } catch (e) {\r\n      message.error(\"服务器内部错误\", 1);\r\n    }\r\n  };\r\n\r\n  // 获取评论\r\n  getComment = (nid) => {\r\n    ajax(\"/commentlist\", { nid })\r\n      .then((res) => {\r\n        const { status, msg, data } = res;\r\n        if (status !== 1) return message.error(msg, 1);\r\n        this.setState({ commentList: data });\r\n      })\r\n      .catch((err) => {\r\n        message.error(\"服务器内部错误\",1);\r\n      });\r\n  };\r\n\r\n  // 处理评论\r\n  handleComment = (e) => {\r\n    this.setState({ comment: e.target.value });\r\n  };\r\n\r\n  // 处理评论回车事件\r\n  handleEnter = (e)=>{\r\n    if(e.keyCode === 13){\r\n      this.commitComment();\r\n    }\r\n  }\r\n\r\n  // 提交评论\r\n  commitComment = () => {\r\n    const { comment, note } = this.state;\r\n    const { user } = global;\r\n\r\n    const data = {\r\n      content: comment,\r\n      nid: note.nid,\r\n      uid: user.uid,\r\n    };\r\n\r\n    if (checkValIsNull(comment)) return message.error(\"请输入评论！\");\r\n\r\n    // 评论\r\n    ajax(\"/addcomment\", data, \"POST\")\r\n      .then((res) => {\r\n        const { status, msg } = res;\r\n        if (status !== 1) return message.error(msg, 1);\r\n        message.success(\"评论成功\", 1);\r\n        // 清空评论\r\n        this.setState({ comment: \"\" });\r\n        this.getComment(note.nid);\r\n      })\r\n      .catch((err) => {\r\n        if (user.uid === -1) {\r\n          message.info(\"请先登录！\", 1);\r\n        } else {\r\n          message.error(\"服务器内部错误\", 1);\r\n        }\r\n      });\r\n  };\r\n\r\n  // 删除评论\r\n  deleteComment = (cid, uid, nid) => {\r\n    Modal.confirm({\r\n      title: `确认删除该评论`,\r\n      okText: \"确认\",\r\n      cancelText: \"取消\",\r\n      onOk: () => {\r\n        const { user } = global;\r\n        if (uid !== user.uid) return message.error(\"无法删除别人的评论！\");\r\n        ajax(\"/deletecomment\", { cid, uid }, \"POST\")\r\n          .then((res) => {\r\n            console.log(res);\r\n            const { status, msg } = res;\r\n            if (status !== 1) return message.error(msg, 1);\r\n            message.success(msg, 1);\r\n            this.getComment(nid);\r\n          })\r\n          .catch((err) => {\r\n            if (user.uid === -1) {\r\n              message.info(\"请先登录！\", 1);\r\n            } else {\r\n              message.error(\"服务器内部错误\", 1);\r\n            }\r\n          });\r\n      },\r\n    });\r\n  };\r\n\r\n  componentDidMount() {\r\n    // console.log(this.props);\r\n    const { nid } = this.props.location.query || {};\r\n    console.log(nid);\r\n    this.getNoteDetail(nid);\r\n  }\r\n\r\n  render() {\r\n    const { commentList, commentVisible, ifPraise, note, comment } = this.state;\r\n    const { user } = global;\r\n    return (\r\n      <div className=\"detail\">\r\n        <h3>{note.title}</h3>\r\n        <div className=\"tips\">\r\n          <strong>{note.author}</strong>\r\n          <span>{note.date}</span>\r\n          <Tag color={note.color}>{note.tag}</Tag>\r\n        </div>\r\n        <div className=\"content\">{note.content}</div>\r\n        <div className=\"tool\">\r\n          <LikeFilled\r\n            onClick={this.togglePraise}\r\n            style={{\r\n              fontSize: 20,\r\n              cursor: \"pointer\",\r\n              color: ifPraise ? \"#0084ff\" : \"#999aaa\", //f8f8f8\r\n            }}\r\n          />\r\n          <MessageFilled\r\n            className=\"item\"\r\n            onClick={this.toggleComment}\r\n            style={{\r\n              fontSize: 20,\r\n              cursor: \"pointer\",\r\n              color: \"#999aaa\", //f8f8f8\r\n            }}\r\n          />\r\n        </div>\r\n        <div\r\n          className=\"comment_wrap\"\r\n          style={{ display: commentVisible ? \"\" : \"none\" }}\r\n        >\r\n          <Input\r\n            value={comment}\r\n            onKeyDown={e=> this.handleEnter(e)}\r\n            onChange={this.handleComment}\r\n          ></Input>\r\n          <Button className=\"btn\" type=\"primary\" onClick={this.commitComment}>\r\n            评论\r\n          </Button>\r\n        </div>\r\n        <div className=\"comment_area\">\r\n          <h4 className=\"title\">评论区</h4>\r\n          <List\r\n            className=\"friend_list\"\r\n            dataSource={commentList}\r\n            size=\"large\"\r\n            bordered\r\n            renderItem={(item) => (\r\n              <List.Item>\r\n                <List.Item.Meta\r\n                  avatar={<Avatar icon={<UserOutlined/>}/>}\r\n                  title={item.commenter}\r\n                  description={item.content}\r\n                />\r\n                <Button\r\n                  type=\"danger\"\r\n                  style={{ display: item.uid === user.uid ? \"\" : \"none\" }}\r\n                  onClick={() =>\r\n                    this.deleteComment(item.cid, item.uid, item.nid)\r\n                  }\r\n                >\r\n                  删除\r\n                </Button>\r\n              </List.Item>\r\n            )}\r\n          />\r\n        </div>\r\n      </div>\r\n    );\r\n  }\r\n}\r\n","import React, { Component } from \"react\";\r\nimport { Input, Select, Button, message } from \"antd\";\r\nimport \"./publish.scss\";\r\nimport { checkValIsNull } from \"../../utils/check\";\r\nimport ajax from \"../../api/ajax\";\r\nimport global from \"../../store/index\";\r\n\r\nexport default class publish extends Component {\r\n  state = {\r\n    // 贴文信息\r\n    note: {\r\n      // title: '', //标题\r\n      // content: '', //内容\r\n      // tid: 0, //标签id\r\n    },\r\n    // 标签分组\r\n    tagArr: [\r\n      // {\r\n      //   title: \"学习\",\r\n      //   color: \"blue\",\r\n      // },\r\n      // {\r\n      //   title: \"生活\",\r\n      //   color: \"red\",\r\n      // },\r\n      // {\r\n      //   title: \"美食\",\r\n      //   color: \"volcano\",\r\n      // },\r\n      // {\r\n      //   title: \"其他\",\r\n      //   color: \"green\",\r\n      // },\r\n    ],\r\n    tid: 0, //标签id\r\n    nid: 0, //贴文id\r\n    title: \"\", //贴文标题\r\n    content: \"\", //贴文内容\r\n    ifEdit: true, //是否是可编辑的状态\r\n    ifPublish: false, //是否修改贴文页面的标志（否，则为添加贴文页面）\r\n  };\r\n\r\n  // 提交贴文\r\n  commitNote = () => {\r\n    // const {\r\n    //   content: {\r\n    //     resizableTextArea: {\r\n    //       props: { value: content },\r\n    //     },\r\n    //   },\r\n    //   title: {\r\n    //     state: { value: title },\r\n    //   },\r\n    // } = this || {};\r\n    const { tid, content, title } = this.state;\r\n    const { uid } = global.user;\r\n    console.log(content, title, tid, uid);\r\n    if (title === undefined || checkValIsNull(title))\r\n      return message.error(\"请填写标题\", 1);\r\n    if (checkValIsNull(content)) return message.error(\"请填写内容\", 1);\r\n\r\n    const data = {\r\n      content,\r\n      title,\r\n      tid,\r\n      uid,\r\n    };\r\n    ajax(\"/addnote\", data, \"POST\")\r\n      .then((res) => {\r\n        console.log(res);\r\n        const { status, msg } = res;\r\n        // 失败\r\n        if (status !== 1) return message.error(msg, 1);\r\n        // 发表论文成功，清空框内的值\r\n        message.success(msg, 1);\r\n        this.setState({\r\n          title: \"\",\r\n          content: \"\",\r\n        });\r\n      })\r\n      .catch((err) => {\r\n        if (uid === -1) {\r\n          message.info(\"请先登录！\", 1);\r\n        } else {\r\n          message.error(\"服务器内部错误\", 1);\r\n        }\r\n      });\r\n  };\r\n\r\n  //修改贴文\r\n  publishNote = () => {\r\n    const { tid, content, title, nid } = this.state;\r\n    const { user } = global;\r\n\r\n    const data = {\r\n      tid,\r\n      content,\r\n      title,\r\n      nid,\r\n      uid: user.uid,\r\n    };\r\n\r\n    ajax(\"/updatenote\", data, \"POST\")\r\n      .then((res) => {\r\n        console.log(res);\r\n        const { status, msg } = res;\r\n        // 修改失败\r\n        if (status !== 1) return message.error(msg, 1);\r\n        // 修改成功\r\n        message.success(\"修改成功\", 1);\r\n        this.setState({ ifEdit: false });\r\n      })\r\n      .catch((err) => {\r\n        if (user.uid === -1) {\r\n          message.info(\"请先登录！\", 1);\r\n        } else {\r\n          message.error(\"服务器内部错误\", 1);\r\n        }\r\n      });\r\n  };\r\n\r\n  // 处理标签id\r\n  handleTag = (val) => {\r\n    // console.log(val);\r\n    this.setState({ tid: val });\r\n  };\r\n\r\n  // 处理标题\r\n  handleTitle = (e) => {\r\n    this.setState({ title: e.target.value });\r\n  };\r\n\r\n  // 处理内容\r\n  handleContent = (e) => {\r\n    this.setState({ content: e.target.value });\r\n  };\r\n\r\n  componentWillMount() {\r\n    // 获取标签信息\r\n    console.log(global, this);\r\n    // 获取路由里参数信息\r\n    const { query } = this.props.location;\r\n    // 获取标签数组\r\n    const { tagArr } = global;\r\n    this.setState({\r\n      tagArr,\r\n      tid: tagArr[0].tid || 0,\r\n    });\r\n\r\n    if (query !== undefined) {\r\n      console.log(query);\r\n      const { note } = query;\r\n      this.setState({\r\n        nid: note.nid,\r\n        ifPublish: true,\r\n        tid: note.tid,\r\n        title: note.title,\r\n        content: note.content,\r\n        ifEdit: false,\r\n      });\r\n    }\r\n  }\r\n\r\n  render() {\r\n    const { tagArr, tid, content, title, ifPublish, ifEdit } = this.state;\r\n    return (\r\n      <div className=\"publish\">\r\n        <div className=\"top\">\r\n          <h3 className=\"title\">贴文编辑</h3>\r\n        </div>\r\n        <div className=\"pub_note_wrap\">\r\n          <div className=\"\">\r\n            <span>标题：</span>\r\n            <Input\r\n              // ref={(c) => (this.title = c)}\r\n              value={title}\r\n              style={{ width: \"60%\" }}\r\n              onChange={this.handleTitle}\r\n              disabled={!ifEdit}\r\n            ></Input>\r\n          </div>\r\n          <div className=\"\">\r\n            <span>标签：</span>\r\n            <div style={{ width: \"60%\" }}>\r\n              <Select\r\n                defaultValue={tid}\r\n                size=\"small\"\r\n                disabled={!ifEdit}\r\n                onChange={this.handleTag}\r\n              >\r\n                {tagArr.map((tag, index) => (\r\n                  <Select.Option value={tag.tid} key={index}>\r\n                    {tag.tag}\r\n                  </Select.Option>\r\n                ))}\r\n              </Select>\r\n            </div>\r\n          </div>\r\n          <div className=\"content\">\r\n            <span>内容：</span>\r\n            <Input.TextArea\r\n              // ref={(c) => (this.content = c)}\r\n              value={content}\r\n              onChange={this.handleContent}\r\n              style={{ width: \"60%\" }}\r\n              autoSize={{ minRows: 5, maxRows: 8 }}\r\n              disabled={!ifEdit}\r\n            ></Input.TextArea>\r\n          </div>\r\n          <div className=\"btn_wrap\">\r\n            <Button\r\n              className=\"btn\"\r\n              size=\"large\"\r\n              onClick={() => this.props.history.goBack()}\r\n            >\r\n              返回\r\n            </Button>\r\n            <Button\r\n              style={{ display: ifPublish ? \"none\" : \"block\" }}\r\n              type=\"primary\"\r\n              className=\"btn\"\r\n              size=\"large\"\r\n              onClick={this.commitNote}\r\n            >\r\n              {/* 添加贴文用的保存按钮 */}\r\n              保存\r\n            </Button>\r\n            <Button\r\n              style={{ display: ifPublish ? \"block\" : \"none\" }}\r\n              type=\"dashed\"\r\n              className=\"btn\"\r\n              size=\"large\"\r\n              onClick={() => {\r\n                this.setState({ ifEdit: !ifEdit });\r\n              }}\r\n            >\r\n              {ifEdit ? \"取消\" : \"编辑\"}\r\n            </Button>\r\n            <Button\r\n              style={{ display: ifPublish ? \"block\" : \"none\" }}\r\n              type=\"primary\"\r\n              className=\"btn\"\r\n              size=\"large\"\r\n              onClick={this.publishNote}\r\n            >\r\n              修改\r\n            </Button>\r\n          </div>\r\n        </div>\r\n      </div>\r\n    );\r\n  }\r\n}\r\n","import Main from \"../pages/main/main\";\r\nimport Login from \"../pages/login/login\";\r\nimport Home from \"../pages/home/home\";\r\nimport Note from \"../pages/note/note\";\r\nimport Friend from \"../pages/friend/friend\";\r\nimport Me from \"../pages/me/me\";\r\nimport Detail from \"../pages/detail/detail\";\r\nimport Publish from \"../pages/publish/publish\";\r\n\r\nexport const mainRoutes = [\r\n    {\r\n        path: '/main/home',\r\n        component: Home,\r\n        exact: true,\r\n    },\r\n    {\r\n        path: '/main/note',\r\n        component: Note,\r\n        exact: true,\r\n    },\r\n    {\r\n        path: '/main/friend',\r\n        component: Friend,\r\n        exact: true,\r\n    },\r\n    {\r\n        path: '/main/me',\r\n        component: Me,\r\n        exact: true,\r\n    },\r\n    {\r\n        path: '/main/detail',\r\n        component: Detail,\r\n        exact: true,\r\n    },\r\n    {\r\n        path: '/main/publish',\r\n        component: Publish,\r\n        exact: true,\r\n    },\r\n]\r\n\r\nconst routes = [\r\n    {\r\n        path: '/login',\r\n        component: Login,\r\n        exact: true,\r\n    },\r\n    {\r\n        path: '/main',\r\n        component: Main,\r\n        exact:false\r\n    }\r\n]\r\n\r\nexport default routes;","import React, { Component } from \"react\";\nimport { BrowserRouter, Route, Switch, Redirect } from \"react-router-dom\";\nimport routes from \"./routes/index\";\nimport './App.css';\nexport default class App extends Component {\n  render() {\n    return (\n      <BrowserRouter>\n        <Switch>\n          {routes.map((r) => {\n            return (\n              <Route\n                key={r.path}\n                path={r.path}\n                component={r.component}\n                exact={r.exact}\n              ></Route>\n            );\n          })}\n          <Redirect to=\"/login\"></Redirect>\n        </Switch>\n      </BrowserRouter>\n      // routes\n    );\n  }\n}\n","import React from 'react';\nimport ReactDOM from 'react-dom';\nimport App from './App';\nimport \"antd/dist/antd.css\";\n\nReactDOM.render(\n  <React.StrictMode>\n    <App />\n  </React.StrictMode>,\n  document.getElementById('root')\n);\n\n// If you want to start measuring performance in your app, pass a function\n// to log results (for example: reportWebVitals(console.log))\n// or send to an analytics endpoint. Learn more: https://bit.ly/CRA-vitals\n"],"sourceRoot":""}