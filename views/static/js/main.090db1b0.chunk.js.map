{"version":3,"sources":["store/index.js","component/header/header.jsx","component/footer/footer.jsx","pages/main/main.jsx","utils/check.js","api/ajax.js","pages/login/login.jsx","component/noteItem/noteItem.jsx","pages/home/home.jsx","pages/note/note.jsx","pages/friend/friend.jsx","component/pieChart/pieChart.jsx","pages/me/me.jsx","pages/detail/detail.jsx","pages/publish/publish.jsx","routes/index.js","App.jsx","index.js"],"names":["global","user","name","pwd","uid","tagArr","header","state","ifLogin","handleExit","Modal","confirm","title","okText","cancelText","onOk","props","history","replace","setState","this","token","Pubsub","subscribe","msg","data","unsubscribe","className","to","style","display","onClick","Component","withRouter","footer","main","routes","map","r","path","component","exact","checkValIsNull","val","length","BASE","ajax","url","type","baseURL","hide","message","loading","Promise","resolve","reject","axios","get","params","post","then","res","catch","err","finally","setTimeout","login","loginModal","imgURL","handleLogin","value","code","info","toLowerCase","status","error","success","id","push","handleRegister","rname","rpwd","rnpwd","npwd","getCode","document","querySelector","innerHTML","toggleBtn","ref","c","width","Password","iconRender","visible","EyeTwoTone","EyeInvisibleOutlined","size","noteItem","note","author","color","comment","content","date","nid","praise","tag","tid","goDetail","pathname","query","base","Object","getOwnPropertyNames","UserOutlined","MessageOutlined","LikeOutlined","Search","Input","home","tagList","curIndex","noteList","onSearch","key","changeTag","index","reqTagList","reqNoteList","location","placeholder","enterButton","textAlign","columns","dataIndex","render","align","e","handleDelete","showMore","getMyNote","pagination","dataSource","bordered","friend","friendList","friendModal","addFriend","userList","fid","getFriendList","goFriend","toggleModal","searchVal","renderItem","item","Item","actions","preventDefault","Meta","avatar","icon","description","onCancel","pieChart","pieRender","classify","noteTotal","count","chart","Chart","container","autoFit","height","coordinate","radius","tooltip","showMarkers","interval","adjust","position","opacity","active","element","shape","matrix","Util","zoom","label","offset","fill","fontSize","shadowBlur","shadowColor","obj","Math","floor","interaction","nextProps","me","ifEdit","friendCount","getUserBase","saveMsg","undefined","publish","disabled","visibility","detail","commentList","commentVisible","ifPraise","togglePraise","toggleComment","getNoteDetail","a","getComment","handleComment","target","handleEnter","keyCode","commitComment","deleteComment","cid","LikeFilled","cursor","MessageFilled","onKeyDown","onChange","commenter","ifPublish","commitNote","publishNote","handleTag","handleTitle","handleContent","defaultValue","Option","TextArea","autoSize","minRows","maxRows","goBack","mainRoutes","Home","Note","Friend","Me","Detail","Publish","Login","Main","App","ReactDOM","StrictMode","getElementById"],"mappings":"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","file":"static/js/main.090db1b0.chunk.js","sourcesContent":["// 存放全局变量\r\nconst global = {\r\n    user: {\r\n        name: '',\r\n        pwd: '',\r\n        uid: -1,\r\n    },\r\n    tagArr: [\r\n        // {\r\n        //     color: \"#2db7f5\",\r\n        //     tag: \"学习\",\r\n        //     tid: 1,\r\n        // },\r\n        // {\r\n        //     color: \"#cf1322\",\r\n        //     tag: \"生活\",\r\n        //     tid: 2,\r\n        // },\r\n        // {\r\n        //     color: \"#87d068\",\r\n        //     tag: \"美食\",\r\n        //     tid: 3,\r\n        // },\r\n        // {\r\n        //     color: \"#333\",\r\n        //     tag: \"其他\",\r\n        //     tid: 4,\r\n        // }\r\n    ]\r\n}\r\n\r\nexport default global;","import React, { Component } from \"react\";\r\nimport Pubsub from \"pubsub-js\";\r\nimport { NavLink, withRouter, Link } from \"react-router-dom\";\r\nimport global from \"../../store/index\";\r\nimport { Modal } from \"antd\";\r\nimport \"./header.scss\";\r\n\r\nclass header extends Component {\r\n  state = {\r\n    name: \"\",\r\n    ifLogin: false,\r\n  };\r\n\r\n  handleExit = () => {\r\n    const { ifLogin } = this.state;\r\n\r\n    Modal.confirm({\r\n      title: \"确认退出\",\r\n      okText: \"确认\",\r\n      cancelText: \"取消\",\r\n      onOk: () => {\r\n        this.props.history.replace(\"/login\");\r\n        global.user.uid = -1;\r\n        global.user.name = \"\";\r\n        global.user.pwd = \"\";\r\n        this.setState({ ifLogin: !ifLogin });\r\n      },\r\n    });\r\n  };\r\n\r\n  componentWillMount() {\r\n    const { user } = global;\r\n    if (user.uid !== -1) {\r\n      this.setState({\r\n        ifLogin: true,\r\n        name: user.name,\r\n      });\r\n    }\r\n  }\r\n\r\n  componentDidMount() {\r\n    // 订阅\r\n    this.token = Pubsub.subscribe(\"update\", (msg, data) => {\r\n      // const {name} = data;\r\n      this.setState(data);\r\n    });\r\n  }\r\n\r\n  componentWillUnmount() {\r\n    // 取消订阅\r\n    Pubsub.unsubscribe(this.token);\r\n  }\r\n\r\n  render() {\r\n    const { ifLogin, name } = this.state;\r\n    return (\r\n      <div className=\"header\">\r\n        <div className=\"logo_wrap\">\r\n          <h1>论坛系统</h1>\r\n          {/* <img src=\"\" alt=\"\" /> */}\r\n        </div>\r\n        <div className=\"nav\">\r\n          <NavLink to=\"/main/home\" className=\"item\">\r\n            首页\r\n          </NavLink>\r\n          <NavLink to=\"/main/note\" className=\"item\">\r\n            创作\r\n          </NavLink>\r\n          <NavLink to=\"/main/friend\" className=\"item\">\r\n            好友\r\n          </NavLink>\r\n          <NavLink to=\"/main/me\" className=\"item\">\r\n            个人中心\r\n          </NavLink>\r\n        </div>\r\n        <div className=\"tip_wrap\">\r\n          <div style={{ display: ifLogin ? \"\" : \"none\" }}>\r\n            {name}，欢迎你！\r\n            <span onClick={this.handleExit}>退出</span>\r\n          </div>\r\n          <Link style={{ display: ifLogin ? \"none\" : \"\" }} to=\"/login\">\r\n            登录 | 注册\r\n          </Link>\r\n        </div>\r\n      </div>\r\n    );\r\n  }\r\n}\r\n\r\nexport default withRouter(header);\r\n","import React, { Component } from 'react';\r\nimport './footer.scss';\r\n\r\nexport default class footer extends Component {\r\n    render() {\r\n        return (\r\n            <div className=\"footer\">\r\n                版权所有 xhw\r\n            </div>\r\n        )\r\n    }\r\n}\r\n","import React, { Component } from \"react\";\r\nimport { Switch, Route, Redirect } from \"react-router-dom\";\r\nimport Header from \"../../component/header/header\";\r\nimport Footer from \"../../component/footer/footer\";\r\nimport { mainRoutes as routes } from \"../../routes/index\";\r\nimport \"./main.scss\";\r\nexport default class main extends Component {\r\n  render() {\r\n    return (\r\n      <div className=\"main\">\r\n        <Header></Header>\r\n        <div className=\"main_wrap\">\r\n          <Switch>\r\n            {routes.map((r) => {\r\n              return (\r\n                <Route\r\n                  key={r.path}\r\n                  path={r.path}\r\n                  component={r.component}\r\n                  exact={r.exact}\r\n                ></Route>\r\n              );\r\n            })}\r\n            <Redirect to=\"/main/home\"></Redirect>\r\n          </Switch>\r\n        </div>\r\n        <Footer></Footer>\r\n      </div>\r\n    );\r\n  }\r\n}\r\n","export function checkValIsNull(val) {\r\n    return val === '' || val.length === 0;\r\n}\r\n\r\n","import axios from 'axios';\r\nimport { message } from 'antd';\r\n\r\nconst BASE = 'http://localhost:8000';\r\n\r\nexport default function ajax(url, data = {}, type = 'GET') {\r\n    let baseURL = BASE + url;\r\n    const hide = message.loading('Loading...', 0);\r\n    return new Promise((resolve, reject) => {\r\n        let promise;\r\n        if (type === 'GET') {\r\n            promise = axios.get(baseURL, { params: data });\r\n        } else {\r\n            promise = axios.post(baseURL, data);\r\n        }\r\n        promise.then(res => {\r\n            resolve(res.data);\r\n        }).catch(err => {\r\n            reject(err)\r\n        }).finally(() => {\r\n            // Dismiss manually and asynchronously\r\n            setTimeout(hide, 0);\r\n        })\r\n    })\r\n}","import React, { Component } from \"react\";\r\nimport { Input, Button, message } from \"antd\";\r\nimport { EyeTwoTone, EyeInvisibleOutlined } from \"@ant-design/icons\";\r\nimport { checkValIsNull } from \"../../utils/check\";\r\nimport ajax from \"../../api/ajax\";\r\nimport global from \"../../store/index\";\r\nimport \"./login.scss\";\r\n\r\nexport default class login extends Component {\r\n  state = {\r\n    loginModal: true,\r\n    imgURL: \"\",\r\n  };\r\n\r\n  // 登录\r\n  handleLogin = () => {\r\n    const {\r\n      name: {\r\n        state: { value: name = \"\" },\r\n      },\r\n      pwd: {\r\n        state: { value: pwd = \"\" },\r\n      },\r\n      code: {\r\n        state: { value: code = \"\" },\r\n      },\r\n    } = this;\r\n    console.log(name, pwd, code);\r\n    if (checkValIsNull(name)) return message.info(\"用户名不能为空！\", 1);\r\n    if (checkValIsNull(pwd)) return message.info(\"密码不能为空！\", 1);\r\n    if (checkValIsNull(code)) return message.info(\"验证码不能为空！\", 1);\r\n\r\n    ajax(\"/login\", { name, pwd, code: code.toLowerCase() }, \"POST\")\r\n      .then((res) => {\r\n        const { status, msg, data } = res;\r\n        if (status !== 1) return message.error(msg, 1);\r\n        // 登陆成功\r\n        message.success(msg, 1);\r\n        const { name, pwd, id } = data;\r\n        global.user.name = name;\r\n        global.user.pwd = pwd;\r\n        global.user.uid = id;\r\n        setTimeout(() => this.props.history.push(\"/main/\"), 500);\r\n      })\r\n      .catch((err) => {\r\n        message.error(\"服务器内部错误\", 1);\r\n      });\r\n  };\r\n\r\n  // 处理注册\r\n  handleRegister = () => {\r\n    const {\r\n      rname: {\r\n        state: { value: name = \"\" },\r\n      },\r\n      rpwd: {\r\n        state: { value: pwd = \"\" },\r\n      },\r\n      rnpwd: {\r\n        state: { value: npwd = \"\" },\r\n      },\r\n    } = this;\r\n\r\n    console.log(name, pwd, npwd);\r\n    if (checkValIsNull(name)) return message.info(\"用户名不能为空！\", 1);\r\n    if (checkValIsNull(pwd)) return message.info(\"密码不能为空！\", 1);\r\n    if (pwd !== npwd) return message.info(\"输入的密码不一致\", 1);\r\n    ajax(\"/register\", { name, pwd }, \"POST\")\r\n      .then((res) => {\r\n        const { msg, status } = res;\r\n        if (status !== 1) return message.error(msg, 1);\r\n        // 注册成功\r\n        message.success(msg, 1);\r\n        this.rname.state.value = \"\";\r\n        this.rpwd.state.value = \"\";\r\n        this.rnpwd.state.value = \"\";\r\n      })\r\n      .catch((err) => {\r\n        message.error(\"服务器内部错误\", 1);\r\n      });\r\n  };\r\n\r\n  // 获取验证码\r\n  getCode = () => {\r\n    ajax(\"/code\")\r\n      .then((res) => {\r\n        const { data } = res;\r\n        this.setState({ imgURL: data });\r\n        let img = document.querySelector(\".imgPic\");\r\n        img.innerHTML = data;\r\n      })\r\n      .catch((err) => {\r\n        console.log(err);\r\n        message.error(\"服务器内部错误\", 1);\r\n      });\r\n  };\r\n\r\n  // 开关\r\n  toggleBtn = () => {\r\n    const { loginModal } = this.state;\r\n    // 登陆页面呈现时，重新获取验证码\r\n    if(!loginModal) this.getCode();\r\n    this.setState({ loginModal: !loginModal });\r\n  };\r\n\r\n  componentWillMount() {\r\n    this.getCode();\r\n  }\r\n\r\n  render() {\r\n    const { loginModal } = this.state;\r\n\r\n    return (\r\n      <div className=\"login\">\r\n        {loginModal && (\r\n          <div className=\"login_wrap\">\r\n            <h3>用户登录</h3>\r\n            <div className=\"user\">\r\n              <span>用户名</span>\r\n              <Input\r\n                ref={(c) => (this.name = c)}\r\n                style={{ width: \"70%\" }}\r\n              ></Input>\r\n            </div>\r\n            <div className=\"pwd\">\r\n              <span>密码</span>\r\n              <Input.Password\r\n                ref={(c) => (this.pwd = c)}\r\n                iconRender={(visible) =>\r\n                  visible ? <EyeTwoTone /> : <EyeInvisibleOutlined />\r\n                }\r\n                style={{ width: \"70%\" }}\r\n              ></Input.Password>\r\n            </div>\r\n            <div className=\"code\">\r\n              <span>验证码</span>\r\n              <div style={{ width: \"70%\" }}>\r\n                <Input\r\n                  ref={(c) => (this.code = c)}\r\n                  style={{ width: \"50%\" }}\r\n                ></Input>\r\n                <div className=\"imgPic\" onClick={this.getCode}>\r\n                  获取验证码\r\n                </div>\r\n                {/* <img className=\"img\" src={imgURL} alt=\"验证码\" /> */}\r\n              </div>\r\n            </div>\r\n            <div className=\"to\">\r\n              <span onClick={this.toggleBtn}>还未注册，前往注册→</span>\r\n            </div>\r\n            <div className=\"submit\">\r\n              <Button type=\"primary\" size=\"large\" onClick={this.handleLogin}>\r\n                登录\r\n              </Button>\r\n            </div>\r\n          </div>\r\n        )}\r\n        {!loginModal && (\r\n          <div className=\"reg_wrap\">\r\n            <h3>用户注册</h3>\r\n            <div className=\"user\">\r\n              <span>用户名</span>\r\n              <Input\r\n                ref={(c) => (this.rname = c)}\r\n                style={{ width: \"70%\" }}\r\n              ></Input>\r\n            </div>\r\n            <div className=\"pwd\">\r\n              <span>密码</span>\r\n              <Input.Password\r\n                ref={(c) => (this.rpwd = c)}\r\n                iconRender={(visible) =>\r\n                  visible ? <EyeTwoTone /> : <EyeInvisibleOutlined />\r\n                }\r\n                style={{ width: \"70%\" }}\r\n              ></Input.Password>\r\n            </div>\r\n            <div className=\"pwd\">\r\n              <span>确认新密码</span>\r\n              <Input.Password\r\n                ref={(c) => (this.rnpwd = c)}\r\n                iconRender={(visible) =>\r\n                  visible ? <EyeTwoTone /> : <EyeInvisibleOutlined />\r\n                }\r\n                style={{ width: \"70%\" }}\r\n              ></Input.Password>\r\n            </div>\r\n            <div className=\"to\">\r\n              <span onClick={this.toggleBtn}>已有帐号，前往登录→</span>\r\n            </div>\r\n            <div className=\"submit\">\r\n              <Button type=\"primary\" size=\"large\" onClick={this.handleRegister}>\r\n                注册\r\n              </Button>\r\n            </div>\r\n          </div>\r\n        )}\r\n      </div>\r\n    );\r\n  }\r\n}\r\n","import React, { Component } from \"react\";\r\nimport { withRouter } from \"react-router-dom\";\r\nimport { Tag } from \"antd\";\r\nimport { UserOutlined, MessageOutlined, LikeOutlined } from \"@ant-design/icons\";\r\nimport \"./noteItem.scss\";\r\n\r\nclass noteItem extends Component {\r\n  state = {\r\n    note: {\r\n      author: \"**\",\r\n      color: \"\",\r\n      comment: \"-\",\r\n      content: \"********\",\r\n      date: \"2021-12-13\",\r\n      nid: -1,\r\n      praise: \"-\",\r\n      tag: \"其他\",\r\n      tid: -1,\r\n      title: \"**\",\r\n      uid: -1,\r\n    },\r\n  };\r\n\r\n  goDetail = (nid) => {\r\n    this.props.history.push({ pathname: \"/main/detail\", query: { nid } });\r\n  };\r\n\r\n  render() {\r\n    const { note: base } = this.state;\r\n    let { note } = this.props;\r\n    // 如果对象为空，赋予原始值\r\n    if (Object.getOwnPropertyNames(note).length === 0) {\r\n      note = base;\r\n    }\r\n    return (\r\n      <div className=\"note_item\">\r\n        <div className=\"top\">\r\n          <h3 className=\"title\" onClick={() => this.goDetail(note.nid)}>\r\n            {note.title}\r\n          </h3>\r\n          <Tag color={note.color}>{note.tag}</Tag>\r\n        </div>\r\n        <div className=\"author\">\r\n          <UserOutlined />\r\n          <span className=\"name\">{note.author}</span>\r\n        </div>\r\n        <div className=\"content\">\r\n          {note.content}\r\n          {/* 我是你法回放v年底规划发hi算法发滴哦覅会发生方法对付大大方方\r\n          我是你法回放v年底规划发hi算法发滴哦覅会发生方法对付大大方方\r\n          我是你法回放v年底规划发hi算法发滴哦覅会发生方法对付大大方方\r\n          我是你法回放v年底规划发hi算法发滴哦覅会发生方法对付大大方方\r\n          我是你法回放v年底规划发hi算法发滴哦覅会发生方法对付大大方方\r\n          我是你法回放v年底规划发hi算法发滴哦覅会发生方法对付大大方方\r\n          我是你法回放v年底规划发hi算法发滴哦覅会发生方法对付大大方方\r\n        */}\r\n        </div>\r\n        <div className=\"bottom\">\r\n          <div className=\"date\">{note.date}</div>\r\n          <div className=\"comment\">\r\n            <MessageOutlined /> {note.comment}\r\n          </div>\r\n          <div className=\"praise\">\r\n            <LikeOutlined /> {note.praise}\r\n          </div>\r\n        </div>\r\n      </div>\r\n    );\r\n  }\r\n}\r\n\r\nexport default withRouter(noteItem);\r\n","import React, { Component } from \"react\";\r\nimport { Input, message } from \"antd\";\r\nimport NoteItem from \"../../component/noteItem/noteItem\";\r\nimport ajax from \"../../api/ajax\";\r\nimport global from \"../../store/index\";\r\nimport { checkValIsNull } from \"../../utils/check\";\r\nimport \"./home.scss\";\r\n\r\nconst { Search } = Input;\r\n\r\nexport default class home extends Component {\r\n  state = {\r\n    // 标签列表\r\n    tagList: [\r\n      {\r\n        tid: -1,\r\n        tag: \"全部\",\r\n        color: \"black\",\r\n      },\r\n      // {\r\n      //   tid: 1,\r\n      //   title: \"学习\",\r\n      //   color: \"black\",\r\n      // },\r\n      // {\r\n      //   tid: 2,\r\n      //   title: \"生活\",\r\n      //   color: \"black\",\r\n      // },\r\n      // {\r\n      //   tid: 3,\r\n      //   title: \"美食\",\r\n      //   color: \"black\",\r\n      // },\r\n      // {\r\n      //   tid: 4,\r\n      //   title: \"其他\",\r\n      //   color: \"black\",\r\n      // },\r\n    ],\r\n    // 当前标签索引\r\n    curIndex: 0,\r\n    // 贴文列表\r\n    noteList: [\r\n      // {\r\n      //   author: \"xhw\",\r\n      //   color: \"red\",\r\n      //   comment: 2,\r\n      //   content: \"打发打发\",\r\n      //   date: \"2021-12-08\",\r\n      //   nid: 1,\r\n      //   praise: 1,\r\n      //   tag: \"生活\",\r\n      //   tid: 2,\r\n      //   title: \"合肥\",\r\n      //   uid: 1,\r\n      // },\r\n      {},\r\n    ],\r\n  };\r\n\r\n  // 搜索内容\r\n  onSearch = (key) => {\r\n    console.log(key);\r\n    if (checkValIsNull(key)) return message.error(\"请输入内容\", 1);\r\n    ajax(\"/notelist\", { key })\r\n      .then((res) => {\r\n        console.log(res);\r\n        const { data, status, msg } = res;\r\n        if (status !== 1) return message.error(msg);\r\n        message.success(\"搜索结果已展示\");\r\n        this.setState({ noteList: data, curIndex: -1 });\r\n      })\r\n      .catch((err) => {\r\n        console.log(err);\r\n        message.error(\"服务器内部错误\");\r\n      });\r\n  };\r\n\r\n  // 切换标签\r\n  changeTag = (index) => {\r\n    const { tagList } = this.state;\r\n    this.setState({ curIndex: index });\r\n    ajax(\"/notelist\", index === 0 ? {} : { tid: tagList[index].tid })\r\n      .then((res) => {\r\n        console.log(res);\r\n        const { data, status, msg } = res;\r\n        if (status !== 1) return message.error(msg);\r\n        message.success(\"获取贴文成功\", 1);\r\n        this.setState({ noteList: data });\r\n        console.log(this.state.noteList);\r\n      })\r\n      .catch((err) => {\r\n        message.error(\"服务器错误\", 1);\r\n      });\r\n  };\r\n\r\n  // 获取标签列表\r\n  reqTagList = () => {\r\n    ajax(\"/taglist\")\r\n      .then((res) => {\r\n        const { tagList } = this.state;\r\n        console.log(res, tagList);\r\n        const { data: tag, status, msg } = res;\r\n\r\n        if (status !== 1) return message.error(msg);\r\n        this.setState({ tagList: [...tagList, ...tag] });\r\n        global.tagArr = tag;\r\n        message.success(\"获取分区成功\", 0.5);\r\n      })\r\n      .catch((err) => {\r\n        message.error(\"服务器内部错误\", 1);\r\n      });\r\n  };\r\n\r\n  // 获取贴文情况\r\n  reqNoteList = (uid = -1) => {\r\n    if (uid !== -1) this.setState({ curIndex: -1 });\r\n    ajax(\"/notelist\", uid === -1 ? {} : { uid })\r\n      .then((res) => {\r\n        const { data: noteList, status, msg } = res;\r\n        if (status !== 1) return message.error(msg);\r\n        message.success(\"获取贴文成功\", 1);\r\n        this.setState({ noteList });\r\n      })\r\n      .catch((err) => {\r\n        message.error(\"服务器内部错误\", 1);\r\n      });\r\n  };\r\n\r\n  componentWillMount() {\r\n    this.reqTagList();\r\n    const { location } = this.props;\r\n    let id = -1;\r\n    if (\"query\" in location) {\r\n      const { uid } = location.query;\r\n      id = uid;\r\n    }\r\n    this.reqNoteList(id);\r\n  }\r\n\r\n  render() {\r\n    const { tagList, curIndex, noteList } = this.state;\r\n    return (\r\n      <div className=\"home\">\r\n        <div className=\"input_wrap\">\r\n          <Search\r\n            placeholder=\"输入关键字搜索贴文\"\r\n            onSearch={this.onSearch}\r\n            enterButton\r\n          />\r\n        </div>\r\n        <ul className=\"tag_wrap\">\r\n          {tagList.map((tag, index) => {\r\n            return (\r\n              <li\r\n                key={index}\r\n                onClick={() => this.changeTag(index)}\r\n                className={curIndex === index ? \"active\" : \"\"}\r\n              >\r\n                {tag.tag}\r\n              </li>\r\n            );\r\n          })}\r\n        </ul>\r\n        <div className=\"note_wrap\">\r\n          {!noteList.length && (\r\n            <div style={{ textAlign: \"center\" }}>暂无数据</div>\r\n          )}\r\n          {noteList.map((note, index) => {\r\n            return <NoteItem key={index} note={note}></NoteItem>;\r\n          })}\r\n        </div>\r\n      </div>\r\n    );\r\n  }\r\n}\r\n","import React, { Component } from \"react\";\r\nimport { Link } from \"react-router-dom\";\r\nimport { Button, Table, Space, Tag, Modal, message } from \"antd\";\r\nimport ajax from \"../../api/ajax\";\r\nimport global from \"../../store/index\";\r\nimport \"./note.scss\";\r\n\r\nexport default class note extends Component {\r\n  state = {\r\n    columns: [\r\n      {\r\n        title: \"标题\",\r\n        dataIndex: \"title\",\r\n        key: \"title\",\r\n      },\r\n      {\r\n        title: \"创作者\",\r\n        dataIndex: \"author\",\r\n        key: \"author\",\r\n      },\r\n      {\r\n        title: \"创作日期\",\r\n        dataIndex: \"date\",\r\n        key: \"date\",\r\n      },\r\n      {\r\n        title: \"标签\",\r\n        dataIndex: \"tag\",\r\n        key: \"tag\",\r\n        render: (tag, note) => {\r\n          // console.log(tag, note);\r\n          return <Tag color={note.color}>{tag}</Tag>;\r\n        },\r\n      },\r\n      {\r\n        title: \"操作\",\r\n        key: \"action\",\r\n        align: \"center\",\r\n        render: (e) => (\r\n          <Space size=\"middle\">\r\n            <Button type=\"danger\" onClick={() => this.handleDelete(e)}>\r\n              删除\r\n            </Button>\r\n            <Button\r\n              type=\"primary\"\r\n              onClick={() =>\r\n                this.props.history.push({\r\n                  pathname: \"/main/publish\",\r\n                  query: { note: e },\r\n                })\r\n              }\r\n            >\r\n              修改\r\n            </Button>\r\n            <Button onClick={() => this.showMore(e)}>更多</Button>\r\n          </Space>\r\n        ),\r\n      },\r\n    ],\r\n    noteList: [\r\n      // {\r\n      //   key: '1',\r\n      //   title: \"合肥\",\r\n      //   author: \"xhw\",\r\n      //   date: \"2021-12-08\",\r\n      //   tag: \"生活\",\r\n      // },\r\n    ],\r\n  };\r\n\r\n  // 删除贴文\r\n  handleDelete = (e) => {\r\n    console.log(e);\r\n    Modal.confirm({\r\n      title: `确认删除《${e.title}》贴文`,\r\n      okText: \"确认\",\r\n      cancelText: \"取消\",\r\n      onOk: () => {\r\n        const { user } = global;\r\n        ajax(\"/deletenote\", { nid: e.nid, uid: user.uid }, \"POST\")\r\n          .then((res) => {\r\n            console.log(res);\r\n            const { status, msg } = res;\r\n            if (status !== 1) return message.error(msg, 1);\r\n            message.success(`已删除《${e.title}》贴文`, 1);\r\n            this.getMyNote(user.uid);\r\n          })\r\n          .catch((err) => {\r\n            if (user.uid === -1) {\r\n              message.info(\"请先登录！\", 1);\r\n            } else {\r\n              message.error(\"服务器内部错误\", 1);\r\n            }\r\n          });\r\n      },\r\n    });\r\n  };\r\n\r\n  //显示更多\r\n  showMore = (e) => {\r\n    console.log(e);\r\n    const { nid } = e;\r\n    this.props.history.push({ pathname: \"/main/detail\", query: { nid } });\r\n  };\r\n\r\n  // 获取贴文\r\n  getMyNote = (uid) => {\r\n    ajax(\"/notelist\", { uid })\r\n      .then((res) => {\r\n        console.log(res);\r\n        const { status, data, msg } = res;\r\n        if (status !== 1) return message.error(msg, 1);\r\n        const noteList = data.map((note, index) => {\r\n          return {\r\n            ...note,\r\n            key: +index + 1,\r\n          };\r\n        });\r\n        this.setState({ noteList });\r\n        // message.success(\"获取贴文成功\", 1);\r\n      })\r\n      .catch((err) => {\r\n        message.error(\"服务器内部错误\",1);\r\n      });\r\n  };\r\n\r\n  componentWillMount() {\r\n    const {user} = global;\r\n    this.getMyNote(user.uid);\r\n  }\r\n\r\n  render() {\r\n    const { columns, noteList } = this.state;\r\n    console.log(noteList);\r\n    return (\r\n      <div className=\"note\">\r\n        <div className=\"top\">\r\n          <h3>我发布的贴文</h3>\r\n          <Link to=\"/main/publish\">\r\n            <Button type=\"primary\">+ 写贴文</Button>\r\n          </Link>\r\n        </div>\r\n        <div className=\"note_wrap\">\r\n          <Table\r\n            pagination={false}\r\n            columns={columns}\r\n            dataSource={noteList}\r\n            bordered\r\n          ></Table>\r\n        </div>\r\n      </div>\r\n    );\r\n  }\r\n}\r\n","import React, { Component } from \"react\";\r\nimport { List, Avatar, Button, Modal, message, Input, Table } from \"antd\";\r\nimport {UserOutlined} from '@ant-design/icons';\r\nimport ajax from \"../../api/ajax\";\r\nimport global from \"../../store/index\";\r\nimport \"./friend.scss\";\r\n\r\nexport default class friend extends Component {\r\n  state = {\r\n    friendList: [\r\n      // {\r\n      //   uid: 1,\r\n      //   name: \"xhw\",\r\n      // },\r\n      // {\r\n      //   uid: 2,\r\n      //   name: \"xhw233\",\r\n      // },\r\n    ],\r\n    friendModal: false, //好友搜索展示框\r\n    // 搜索好友展示用\r\n    columns: [\r\n      {\r\n        title: \"用户\",\r\n        dataIndex: \"name\",\r\n        key: \"name\",\r\n      },\r\n      {\r\n        title: \"操作\",\r\n        key: \"action\",\r\n        align: \"center\",\r\n        render: (e) => (\r\n          <Button type=\"primary\" onClick={() => this.addFriend(e)}>\r\n            添加\r\n          </Button>\r\n        ),\r\n      },\r\n    ],\r\n    userList: [\r\n      {\r\n        key: \"1\",\r\n        name: \"xhw\",\r\n      },\r\n    ],\r\n  };\r\n\r\n  //   删除好友\r\n  handleDelete = (e) => {\r\n    console.log(e);\r\n    Modal.confirm({\r\n      title: `确认删除好友${e.name}`,\r\n      okText: \"确认\",\r\n      cancelText: \"取消\",\r\n      onOk: () => {\r\n        // this.props.history.replace(\"/login\");\r\n        const { user } = global;\r\n        ajax(\"/deletefriend\", { uid: user.uid, fid: e.id }, \"POST\")\r\n          .then((res) => {\r\n            console.log(res);\r\n            const { status, msg } = res;\r\n            if (status !== 1) return message.error(msg, 1);\r\n            message.success(`已删除好友${e.name}`, 1);\r\n            this.getFriendList(user.uid);\r\n          })\r\n          .catch((err) => {\r\n            if (user.uid === -1) {\r\n              message.info(\"请先登录！\", 1);\r\n            } else {\r\n              message.error(\"服务器内部错误\", 1);\r\n            }\r\n          });\r\n      },\r\n    });\r\n  };\r\n\r\n  //   查看好友更多信息\r\n  goFriend = (e) => {\r\n    this.props.history.push({\r\n      pathname: \"/main/home/\",\r\n      query: { uid: e.id },\r\n    });\r\n  };\r\n\r\n  // 添加好友\r\n  addFriend = (e) => {\r\n    const { user } = global;\r\n    console.log(e);\r\n    if (e.id === user.uid) return message.error(\"不能添加自己为好友\");\r\n    ajax(\"/addfriend\", { uid: user.uid, fid: e.id }, \"POST\")\r\n      .then((res) => {\r\n        const { msg, status } = res;\r\n        if (status !== 1) return message.info(msg, 1);\r\n        message.success(msg, 1);\r\n        this.getFriendList(user.uid);\r\n      })\r\n      .catch((err) => {\r\n        message.error(\"服务器内部错误\", 1);\r\n      });\r\n  };\r\n\r\n  // 开关\r\n  toggleModal = () => {\r\n    const { friendModal } = this.state;\r\n    // 清空数据\r\n    if (this.searchVal) this.searchVal.state.value = \"\";\r\n    this.setState({\r\n      friendModal: !friendModal,\r\n      userList: [],\r\n    });\r\n  };\r\n\r\n  //   搜索好友\r\n  onSearch = (e) => {\r\n    console.log(e);\r\n    ajax(\"/searchuser\", { key: e }, \"POST\")\r\n      .then((res) => {\r\n        console.log(res);\r\n        let { data, status, msg } = res;\r\n        if (status !== 1) return message.error(msg, 1);\r\n        data = data.map((user, index) => {\r\n          return {\r\n            key: index,\r\n            ...user,\r\n          };\r\n        });\r\n        this.setState({ userList: data });\r\n      })\r\n      .catch((err) => {\r\n        message.error(\"服务器内部错误\", 1);\r\n      });\r\n  };\r\n\r\n  // 获取好友列表\r\n  getFriendList = (uid) => {\r\n    ajax(\"/friendlist\", { uid })\r\n      .then((res) => {\r\n        console.log(res);\r\n        const { status, msg, data } = res;\r\n        if (status !== 1) return message.error(msg, 1);\r\n        // message.success(\"获取好友列表成功\", 1);\r\n        this.setState({ friendList: data });\r\n      })\r\n      .catch((err) => {\r\n        message.error(\"服务器内部错误\", 1);\r\n      });\r\n  };\r\n\r\n  componentWillMount() {\r\n    // 获取用户id\r\n    const { user } = global;\r\n    this.getFriendList(user.uid);\r\n  }\r\n\r\n  render() {\r\n    const { friendList, friendModal, columns, userList } = this.state;\r\n    return (\r\n      <div className=\"friend\">\r\n        <div className=\"top\">\r\n          <h3>好友列表</h3>\r\n          <Button onClick={this.toggleModal}>添加好友</Button>\r\n        </div>\r\n        <List\r\n          className=\"friend_list\"\r\n          dataSource={friendList}\r\n          size=\"large\"\r\n          bordered\r\n          renderItem={(item) => (\r\n            <List.Item\r\n              actions={[\r\n                <Button\r\n                  onClick={(e) => {\r\n                    e.preventDefault();\r\n                    this.handleDelete(item);\r\n                  }}\r\n                  type=\"danger\"\r\n                >\r\n                  删除\r\n                </Button>,\r\n                <Button\r\n                  onClick={(e) => {\r\n                    e.preventDefault();\r\n                    this.goFriend(item);\r\n                  }}\r\n                  type=\"primary\"\r\n                >\r\n                  更多\r\n                </Button>,\r\n              ]}\r\n            >\r\n              <List.Item.Meta\r\n                avatar={<Avatar icon={<UserOutlined />}/>}\r\n                title={item.name}\r\n                description=\"此用户很赖，没有介绍\"\r\n              />\r\n            </List.Item>\r\n          )}\r\n        />\r\n        {/* 好友拟态框 */}\r\n        <Modal\r\n          title=\"添加好友\"\r\n          visible={friendModal}\r\n          onCancel={this.toggleModal}\r\n          footer={[\r\n            <Button key=\"back\" onClick={this.toggleModal}>\r\n              取消\r\n            </Button>,\r\n          ]}\r\n        >\r\n          <div id=\"friend_wrap\">\r\n            <Input.Search\r\n              placeholder=\"输入关键字搜索好友\"\r\n              ref={(c) => (this.searchVal = c)}\r\n              onSearch={this.onSearch}\r\n              // allowClear\r\n              enterButton\r\n            />\r\n            <Table\r\n              className=\"table\"\r\n              pagination={false}\r\n              columns={columns}\r\n              dataSource={userList}\r\n              bordered\r\n            ></Table>\r\n          </div>\r\n        </Modal>\r\n      </div>\r\n    );\r\n  }\r\n}\r\n","import React, { Component } from \"react\";\r\nimport { Chart, Util } from \"@antv/g2\";\r\nimport \"./pieChart.scss\";\r\n\r\nexport default class pieChart extends Component {\r\n  state = {};\r\n\r\n  componentWillMount() {\r\n  }\r\n\r\n  componentWillReceiveProps(nextProps) {\r\n    const { noteTotal, classify } = nextProps;\r\n    if (nextProps.noteTotal !== this.props.noteTotal) {\r\n      this.pieRender(classify, noteTotal);\r\n    }\r\n  }\r\n\r\n  componentDidMount() {\r\n  }\r\n\r\n  pieRender = (classify, noteTotal) => {\r\n    const data = classify.map((item) => {\r\n      return {\r\n        type: item.tag,\r\n        value: item.count,\r\n      };\r\n    });\r\n    const chart = new Chart({\r\n      container: \"container\",\r\n      autoFit: true,\r\n      height: 300,\r\n      // padding: [20, 10, 20, 10],\r\n    });\r\n\r\n    chart.data(data);\r\n\r\n    chart.coordinate(\"theta\", {\r\n      radius: 0.8,\r\n    });\r\n    chart.tooltip({\r\n      showMarkers: false,\r\n    });\r\n\r\n    chart\r\n      .interval()\r\n      .adjust(\"stack\")\r\n      .position(\"value\")\r\n      .color(\r\n        \"type\",\r\n        // [\"#063d8a\", \"#1770d6\", \"#47abfc\", \"#38c060\"]\r\n        classify.map((item) => {\r\n          return item.color;\r\n        })\r\n      )\r\n      .style({ opacity: 1 })\r\n      .state({\r\n        active: {\r\n          style: (element) => {\r\n            const shape = element.shape;\r\n            return {\r\n              matrix: Util.zoom(shape, 1.1),\r\n            };\r\n          },\r\n        },\r\n      })\r\n      .label(\"type\", (val) => {\r\n        return {\r\n          offset: -30,\r\n          style: {\r\n            opacity: 1,\r\n            fill: \"white\",\r\n            fontSize: 12,\r\n            shadowBlur: 2,\r\n            shadowColor: \"rgba(0, 0, 0, .45)\",\r\n          },\r\n          content: (obj) => {\r\n            return (\r\n              obj.type + \"\\n\" + Math.floor((obj.value / noteTotal) * 100) + \"%\"\r\n            );\r\n          },\r\n        };\r\n      });\r\n\r\n    // 可选择的样式\r\n    chart.interaction(\"element-single-selected\");\r\n    // 渲染\r\n    chart.render();\r\n  };\r\n\r\n  render() {\r\n    return <div id=\"container\"></div>;\r\n  }\r\n}\r\n","import React, { Component } from \"react\";\r\nimport Pubsub from 'pubsub-js';\r\nimport { Input, Button, Statistic, message } from \"antd\";\r\nimport { EyeTwoTone, EyeInvisibleOutlined } from \"@ant-design/icons\";\r\nimport Pie from \"../../component/pieChart/pieChart\";\r\nimport ajax from \"../../api/ajax\";\r\nimport global from \"../../store/index\";\r\nimport { checkValIsNull } from \"../../utils/check\";\r\nimport \"./me.scss\";\r\n\r\nexport default class me extends Component {\r\n  state = {\r\n    name: \"test\", //用户名\r\n    ifEdit: false, //是否可以编辑\r\n    friendCount: 0, //好友数\r\n    noteTotal: 0, //贴文总数\r\n    // 贴文分类情况\r\n    classify: [],\r\n  };\r\n\r\n  // 控制开关\r\n  toggleBtn = () => {\r\n    const { ifEdit } = this.state;\r\n    this.setState({ ifEdit: !ifEdit });\r\n  };\r\n\r\n  // 获取用户基本情况\r\n  getUserBase = (uid) => {\r\n    ajax(\"/base\", { uid }, \"POST\")\r\n      .then((res) => {\r\n        console.log(res);\r\n        const { status, msg, data } = res;\r\n        if (status !== 1) return message.error(msg, 1);\r\n        message.success(\"获取用户基本情况成功\", 1);\r\n        const { friendCount, noteTotal, classify } = data;\r\n        this.setState({ friendCount, noteTotal, classify });\r\n      })\r\n      .catch((err) => {\r\n        if (uid === -1) {\r\n          message.info(\"请先登录！\", 1);\r\n        } else {\r\n          message.error(\"服务器内部错误\", 1);\r\n        }\r\n      });\r\n  };\r\n\r\n  // 保存信息\r\n  saveMsg = () => {\r\n    console.log(this);\r\n    const {\r\n      name: {\r\n        state: { value: name },\r\n      },\r\n      pwd: {\r\n        state: { value: pwd },\r\n      },\r\n      npwd: {\r\n        state: { value: npwd },\r\n      },\r\n    } = this;\r\n    if (name === undefined || checkValIsNull(name))\r\n      return message.error(\"用户名不能为空\", 1);\r\n    if (pwd === undefined || checkValIsNull(pwd))\r\n      return message.error(\"密码不能为空\", 1);\r\n    if (npwd === undefined || checkValIsNull(npwd))\r\n      return message.error(\"新密码不能为空\", 1);\r\n    if (pwd !== npwd) return message.error(\"两次密码不一致\", 1);\r\n\r\n    const { user } = global;\r\n    const data = {\r\n      name,\r\n      pwd,\r\n      uid: user.uid,\r\n    };\r\n\r\n    ajax(\"/updateuser\", data, \"POST\")\r\n      .then((res) => {\r\n        console.log(res);\r\n        const { status, msg } = res;\r\n        if (status !== 1) return message.error(msg, 1);\r\n        message.success(msg, 1);\r\n        // 成功修改用户的逻辑\r\n        global.user.name = name;\r\n        global.user.pwd = pwd;\r\n        this.setState({ name });\r\n        this.toggleBtn();\r\n\r\n        // 通知头部组件名字信息修改了\r\n        Pubsub.publish(\"update\", {name:name});\r\n      })\r\n      .catch((err) => {\r\n        // message.error(err);\r\n        message.error(\"服务器内部错误\", 1);\r\n      });\r\n  };\r\n\r\n  componentWillMount() {\r\n    const { user } = global;\r\n    console.log(this);\r\n    this.getUserBase(user.uid);\r\n    this.setState({ name: user.name });\r\n  }\r\n\r\n  componentDidMount() {\r\n    const { user } = global;\r\n    console.log(global.tagArr);\r\n    this.name.state.value = user.name;\r\n    this.pwd.state.value = user.pwd;\r\n  }\r\n\r\n  render() {\r\n    const { name, friendCount, noteTotal, classify, ifEdit } = this.state;\r\n    return (\r\n      <div className=\"me\">\r\n        <div className=\"title\">\r\n          <h3>{name} 的个人中心</h3>\r\n        </div>\r\n        <div className=\"base\">\r\n          <div className=\"left\">\r\n            <h4>用户基本情况</h4>\r\n            <div className=\"wrap\">\r\n              <Statistic className=\"item\" title=\"发帖总数\" value={noteTotal} />\r\n              <Statistic className=\"item\" title=\"好友数\" value={friendCount} />\r\n            </div>\r\n            <Pie noteTotal={noteTotal} classify={classify}></Pie>\r\n          </div>\r\n\r\n          <div className=\"message\">\r\n            <h4>用户基本资料</h4>\r\n            <div className=\"name\">\r\n              <span>用户名</span>\r\n              <Input\r\n                ref={(c) => (this.name = c)}\r\n                style={{ width: \"70%\" }}\r\n                disabled={!ifEdit}\r\n              ></Input>\r\n            </div>\r\n            <div className=\"pwd\">\r\n              <span>密码</span>\r\n              <Input.Password\r\n                ref={(c) => (this.pwd = c)}\r\n                iconRender={(visible) =>\r\n                  visible ? <EyeTwoTone /> : <EyeInvisibleOutlined />\r\n                }\r\n                disabled={!ifEdit}\r\n                style={{ width: \"70%\" }}\r\n              ></Input.Password>\r\n            </div>\r\n            <div\r\n              className=\"pwd\"\r\n              style={{\r\n                visibility: ifEdit ? \"visible\" : \"hidden\",\r\n              }}\r\n            >\r\n              <span>确认新密码</span>\r\n              <Input.Password\r\n                ref={(c) => (this.npwd = c)}\r\n                iconRender={(visible) =>\r\n                  visible ? <EyeTwoTone /> : <EyeInvisibleOutlined />\r\n                }\r\n                disabled={!ifEdit}\r\n                style={{ width: \"70%\" }}\r\n              ></Input.Password>\r\n            </div>\r\n            <div className=\"btn_wrap\">\r\n              <Button\r\n                className=\"btn\"\r\n                type=\"primary\"\r\n                style={{ display: ifEdit ? \"none\" : \"\" }}\r\n                onClick={this.toggleBtn}\r\n              >\r\n                修改\r\n              </Button>\r\n              <>\r\n                <Button\r\n                  className=\"btn\"\r\n                  style={{ display: ifEdit ? \"\" : \"none\" }}\r\n                  onClick={this.toggleBtn}\r\n                >\r\n                  取消\r\n                </Button>\r\n                <Button\r\n                  style={{ display: ifEdit ? \"\" : \"none\" }}\r\n                  className=\"btn\"\r\n                  type=\"primary\"\r\n                  onClick={this.saveMsg}\r\n                >\r\n                  保存\r\n                </Button>\r\n              </>\r\n            </div>\r\n          </div>\r\n        </div>\r\n      </div>\r\n    );\r\n  }\r\n}\r\n","import React, { Component } from \"react\";\r\nimport { Tag, List, Avatar, Input, Button, message, Modal } from \"antd\";\r\nimport { LikeFilled, MessageFilled,UserOutlined } from \"@ant-design/icons\";\r\nimport ajax from \"../../api/ajax\";\r\nimport global from \"../../store/index\";\r\nimport { checkValIsNull } from \"../../utils/check\";\r\nimport \"./detail.scss\";\r\n\r\nexport default class detail extends Component {\r\n  state = {\r\n    // 评论区\r\n    commentList: [\r\n      // {\r\n      //   cid: -1,\r\n      //   commenter: \"***\",\r\n      //   content: \"***\",\r\n      //   nid: -1,\r\n      //   uid: -1,\r\n      // },\r\n    ],\r\n    // 评论框\r\n    commentVisible: false,\r\n    // 点赞状态\r\n    ifPraise: false,\r\n    // 评论框内容\r\n    comment: \"\",\r\n    // 贴文详情\r\n    note: {\r\n      author: \"****\",\r\n      color: \"#333\",\r\n      comment: 2,\r\n      content: \"****\",\r\n      date: \"2021-12-08\",\r\n      nid: -1,\r\n      praise: 1,\r\n      tag: \"其他\",\r\n      tid: 4,\r\n      title: \"***\",\r\n      uid: 1,\r\n    },\r\n  };\r\n\r\n  //   控制点赞\r\n  togglePraise = () => {\r\n    const { ifPraise, note } = this.state;\r\n    const { user } = global;\r\n    const data = {\r\n      nid: note.nid,\r\n      uid: user.uid,\r\n    };\r\n    // 已是点赞状态，准备取消赞\r\n    if (ifPraise) {\r\n      ajax(\"/cancelpraise\", data, \"POST\")\r\n        .then((res) => {\r\n          console.log(res);\r\n          const { status, msg } = res;\r\n          if (status !== 1) return message.error(msg, 1);\r\n\r\n          message.success(msg, 1);\r\n          this.setState({ ifPraise: !ifPraise });\r\n        })\r\n        .catch((err) => {\r\n          if (user.uid === -1) {\r\n            message.info(\"请先登录！\", 1);\r\n          } else {\r\n            message.error(\"服务器内部错误\", 1);\r\n          }\r\n        });\r\n    }\r\n    // 已是没赞的状态，正准备点赞\r\n    else {\r\n      ajax(\"/praise\", data, \"POST\")\r\n        .then((res) => {\r\n          console.log(res);\r\n          const { status, msg } = res;\r\n          if (status !== 1) return message.error(msg, 1);\r\n\r\n          message.success(msg, 1);\r\n          this.setState({ ifPraise: !ifPraise });\r\n        })\r\n        .catch((err) => {\r\n          if (user.uid === -1) {\r\n            message.info(\"请先登录！\", 1);\r\n          } else {\r\n            message.error(\"服务器内部错误\", 1);\r\n          }\r\n        });\r\n    }\r\n  };\r\n\r\n  //   控制评论框显示\r\n  toggleComment = () => {\r\n    const { commentVisible } = this.state;\r\n    this.setState({ commentVisible: !commentVisible });\r\n  };\r\n\r\n  // 获取贴文有关信息\r\n  getNoteDetail = async (nid) => {\r\n    try {\r\n      const { user } = global;\r\n\r\n      // 贴文详情\r\n      {\r\n        const { status, msg, data } = await ajax(\"/notelist\", { nid });\r\n        if (status !== 1) return message.error(msg, 1);\r\n        this.setState({ note: data });\r\n      }\r\n\r\n      // 评论详情\r\n      this.getComment(nid);\r\n\r\n      // 点赞详情\r\n      {\r\n        const { status, msg, data } = await ajax(\"/ifpraise\", {\r\n          nid,\r\n          uid: user.uid,\r\n        });\r\n        if (status !== 1) return message.error(msg, 1);\r\n        this.setState({ ifPraise: data });\r\n      }\r\n\r\n      message.success(\"获取贴文详情成功\", 1);\r\n    } catch (e) {\r\n      message.error(\"服务器内部错误\", 1);\r\n    }\r\n  };\r\n\r\n  // 获取评论\r\n  getComment = (nid) => {\r\n    ajax(\"/commentlist\", { nid })\r\n      .then((res) => {\r\n        const { status, msg, data } = res;\r\n        if (status !== 1) return message.error(msg, 1);\r\n        this.setState({ commentList: data });\r\n      })\r\n      .catch((err) => {\r\n        message.error(\"服务器内部错误\",1);\r\n      });\r\n  };\r\n\r\n  // 处理评论\r\n  handleComment = (e) => {\r\n    this.setState({ comment: e.target.value });\r\n  };\r\n\r\n  // 处理评论回车事件\r\n  handleEnter = (e)=>{\r\n    if(e.keyCode === 13){\r\n      this.commitComment();\r\n    }\r\n  }\r\n\r\n  // 提交评论\r\n  commitComment = () => {\r\n    const { comment, note } = this.state;\r\n    const { user } = global;\r\n\r\n    const data = {\r\n      content: comment,\r\n      nid: note.nid,\r\n      uid: user.uid,\r\n    };\r\n\r\n    if (checkValIsNull(comment)) return message.error(\"请输入评论！\");\r\n\r\n    // 评论\r\n    ajax(\"/addcomment\", data, \"POST\")\r\n      .then((res) => {\r\n        const { status, msg } = res;\r\n        if (status !== 1) return message.error(msg, 1);\r\n        message.success(\"评论成功\", 1);\r\n        // 清空评论\r\n        this.setState({ comment: \"\" });\r\n        this.getComment(note.nid);\r\n      })\r\n      .catch((err) => {\r\n        if (user.uid === -1) {\r\n          message.info(\"请先登录！\", 1);\r\n        } else {\r\n          message.error(\"服务器内部错误\", 1);\r\n        }\r\n      });\r\n  };\r\n\r\n  // 删除评论\r\n  deleteComment = (cid, uid, nid) => {\r\n    Modal.confirm({\r\n      title: `确认删除该评论`,\r\n      okText: \"确认\",\r\n      cancelText: \"取消\",\r\n      onOk: () => {\r\n        const { user } = global;\r\n        if (uid !== user.uid) return message.error(\"无法删除别人的评论！\");\r\n        ajax(\"/deletecomment\", { cid, uid }, \"POST\")\r\n          .then((res) => {\r\n            console.log(res);\r\n            const { status, msg } = res;\r\n            if (status !== 1) return message.error(msg, 1);\r\n            message.success(msg, 1);\r\n            this.getComment(nid);\r\n          })\r\n          .catch((err) => {\r\n            if (user.uid === -1) {\r\n              message.info(\"请先登录！\", 1);\r\n            } else {\r\n              message.error(\"服务器内部错误\", 1);\r\n            }\r\n          });\r\n      },\r\n    });\r\n  };\r\n\r\n  componentDidMount() {\r\n    // console.log(this.props);\r\n    const { nid } = this.props.location.query || {};\r\n    console.log(nid);\r\n    this.getNoteDetail(nid);\r\n  }\r\n\r\n  render() {\r\n    const { commentList, commentVisible, ifPraise, note, comment } = this.state;\r\n    const { user } = global;\r\n    return (\r\n      <div className=\"detail\">\r\n        <h3>{note.title}</h3>\r\n        <div className=\"tips\">\r\n          <strong>{note.author}</strong>\r\n          <span>{note.date}</span>\r\n          <Tag color={note.color}>{note.tag}</Tag>\r\n        </div>\r\n        <div className=\"content\">{note.content}</div>\r\n        <div className=\"tool\">\r\n          <LikeFilled\r\n            onClick={this.togglePraise}\r\n            style={{\r\n              fontSize: 20,\r\n              cursor: \"pointer\",\r\n              color: ifPraise ? \"#0084ff\" : \"#999aaa\", //f8f8f8\r\n            }}\r\n          />\r\n          <MessageFilled\r\n            className=\"item\"\r\n            onClick={this.toggleComment}\r\n            style={{\r\n              fontSize: 20,\r\n              cursor: \"pointer\",\r\n              color: \"#999aaa\", //f8f8f8\r\n            }}\r\n          />\r\n        </div>\r\n        <div\r\n          className=\"comment_wrap\"\r\n          style={{ display: commentVisible ? \"\" : \"none\" }}\r\n        >\r\n          <Input\r\n            value={comment}\r\n            onKeyDown={e=> this.handleEnter(e)}\r\n            onChange={this.handleComment}\r\n          ></Input>\r\n          <Button className=\"btn\" type=\"primary\" onClick={this.commitComment}>\r\n            评论\r\n          </Button>\r\n        </div>\r\n        <div className=\"comment_area\">\r\n          <h4 className=\"title\">评论区</h4>\r\n          <List\r\n            className=\"friend_list\"\r\n            dataSource={commentList}\r\n            size=\"large\"\r\n            bordered\r\n            renderItem={(item) => (\r\n              <List.Item>\r\n                <List.Item.Meta\r\n                  avatar={<Avatar icon={<UserOutlined/>}/>}\r\n                  title={item.commenter}\r\n                  description={item.content}\r\n                />\r\n                <Button\r\n                  type=\"danger\"\r\n                  style={{ display: item.uid === user.uid ? \"\" : \"none\" }}\r\n                  onClick={() =>\r\n                    this.deleteComment(item.cid, item.uid, item.nid)\r\n                  }\r\n                >\r\n                  删除\r\n                </Button>\r\n              </List.Item>\r\n            )}\r\n          />\r\n        </div>\r\n      </div>\r\n    );\r\n  }\r\n}\r\n","import React, { Component } from \"react\";\r\nimport { Input, Select, Button, message } from \"antd\";\r\nimport \"./publish.scss\";\r\nimport { checkValIsNull } from \"../../utils/check\";\r\nimport ajax from \"../../api/ajax\";\r\nimport global from \"../../store/index\";\r\n\r\nexport default class publish extends Component {\r\n  state = {\r\n    // 贴文信息\r\n    note: {\r\n      // title: '', //标题\r\n      // content: '', //内容\r\n      // tid: 0, //标签id\r\n    },\r\n    // 标签分组\r\n    tagArr: [\r\n      // {\r\n      //   title: \"学习\",\r\n      //   color: \"blue\",\r\n      // },\r\n      // {\r\n      //   title: \"生活\",\r\n      //   color: \"red\",\r\n      // },\r\n      // {\r\n      //   title: \"美食\",\r\n      //   color: \"volcano\",\r\n      // },\r\n      // {\r\n      //   title: \"其他\",\r\n      //   color: \"green\",\r\n      // },\r\n    ],\r\n    tid: 0, //标签id\r\n    nid: 0, //贴文id\r\n    title: \"\", //贴文标题\r\n    content: \"\", //贴文内容\r\n    ifEdit: true, //是否是可编辑的状态\r\n    ifPublish: false, //是否修改贴文页面的标志（否，则为添加贴文页面）\r\n  };\r\n\r\n  // 提交贴文\r\n  commitNote = () => {\r\n    // const {\r\n    //   content: {\r\n    //     resizableTextArea: {\r\n    //       props: { value: content },\r\n    //     },\r\n    //   },\r\n    //   title: {\r\n    //     state: { value: title },\r\n    //   },\r\n    // } = this || {};\r\n    const { tid, content, title } = this.state;\r\n    const { uid } = global.user;\r\n    console.log(content, title, tid, uid);\r\n    if (title === undefined || checkValIsNull(title))\r\n      return message.error(\"请填写标题\", 1);\r\n    if (checkValIsNull(content)) return message.error(\"请填写内容\", 1);\r\n\r\n    const data = {\r\n      content,\r\n      title,\r\n      tid,\r\n      uid,\r\n    };\r\n    ajax(\"/addnote\", data, \"POST\")\r\n      .then((res) => {\r\n        console.log(res);\r\n        const { status, msg } = res;\r\n        // 失败\r\n        if (status !== 1) return message.error(msg, 1);\r\n        // 发表论文成功，清空框内的值\r\n        message.success(msg, 1);\r\n        this.setState({\r\n          title: \"\",\r\n          content: \"\",\r\n        });\r\n      })\r\n      .catch((err) => {\r\n        if (uid === -1) {\r\n          message.info(\"请先登录！\", 1);\r\n        } else {\r\n          message.error(\"服务器内部错误\", 1);\r\n        }\r\n      });\r\n  };\r\n\r\n  //修改贴文\r\n  publishNote = () => {\r\n    const { tid, content, title, nid } = this.state;\r\n    const { user } = global;\r\n\r\n    const data = {\r\n      tid,\r\n      content,\r\n      title,\r\n      nid,\r\n      uid: user.uid,\r\n    };\r\n\r\n    ajax(\"/updatenote\", data, \"POST\")\r\n      .then((res) => {\r\n        console.log(res);\r\n        const { status, msg } = res;\r\n        // 修改失败\r\n        if (status !== 1) return message.error(msg, 1);\r\n        // 修改成功\r\n        message.success(\"修改成功\", 1);\r\n        this.setState({ ifEdit: false });\r\n      })\r\n      .catch((err) => {\r\n        if (user.uid === -1) {\r\n          message.info(\"请先登录！\", 1);\r\n        } else {\r\n          message.error(\"服务器内部错误\", 1);\r\n        }\r\n      });\r\n  };\r\n\r\n  // 处理标签id\r\n  handleTag = (val) => {\r\n    // console.log(val);\r\n    this.setState({ tid: val });\r\n  };\r\n\r\n  // 处理标题\r\n  handleTitle = (e) => {\r\n    this.setState({ title: e.target.value });\r\n  };\r\n\r\n  // 处理内容\r\n  handleContent = (e) => {\r\n    this.setState({ content: e.target.value });\r\n  };\r\n\r\n  componentWillMount() {\r\n    // 获取标签信息\r\n    console.log(global, this);\r\n    // 获取路由里参数信息\r\n    const { query } = this.props.location;\r\n    // 获取标签数组\r\n    const { tagArr } = global;\r\n    this.setState({\r\n      tagArr,\r\n      tid: tagArr[0].tid || 0,\r\n    });\r\n\r\n    if (query !== undefined) {\r\n      console.log(query);\r\n      const { note } = query;\r\n      this.setState({\r\n        nid: note.nid,\r\n        ifPublish: true,\r\n        tid: note.tid,\r\n        title: note.title,\r\n        content: note.content,\r\n        ifEdit: false,\r\n      });\r\n    }\r\n  }\r\n\r\n  render() {\r\n    const { tagArr, tid, content, title, ifPublish, ifEdit } = this.state;\r\n    return (\r\n      <div className=\"publish\">\r\n        <div className=\"top\">\r\n          <h3 className=\"title\">贴文编辑</h3>\r\n        </div>\r\n        <div className=\"pub_note_wrap\">\r\n          <div className=\"\">\r\n            <span>标题：</span>\r\n            <Input\r\n              // ref={(c) => (this.title = c)}\r\n              value={title}\r\n              style={{ width: \"60%\" }}\r\n              onChange={this.handleTitle}\r\n              disabled={!ifEdit}\r\n            ></Input>\r\n          </div>\r\n          <div className=\"\">\r\n            <span>标签：</span>\r\n            <div style={{ width: \"60%\" }}>\r\n              <Select\r\n                defaultValue={tid}\r\n                size=\"small\"\r\n                disabled={!ifEdit}\r\n                onChange={this.handleTag}\r\n              >\r\n                {tagArr.map((tag, index) => (\r\n                  <Select.Option value={tag.tid} key={index}>\r\n                    {tag.tag}\r\n                  </Select.Option>\r\n                ))}\r\n              </Select>\r\n            </div>\r\n          </div>\r\n          <div className=\"content\">\r\n            <span>内容：</span>\r\n            <Input.TextArea\r\n              // ref={(c) => (this.content = c)}\r\n              value={content}\r\n              onChange={this.handleContent}\r\n              style={{ width: \"60%\" }}\r\n              autoSize={{ minRows: 5, maxRows: 8 }}\r\n              disabled={!ifEdit}\r\n            ></Input.TextArea>\r\n          </div>\r\n          <div className=\"btn_wrap\">\r\n            <Button\r\n              className=\"btn\"\r\n              size=\"large\"\r\n              onClick={() => this.props.history.goBack()}\r\n            >\r\n              返回\r\n            </Button>\r\n            <Button\r\n              style={{ display: ifPublish ? \"none\" : \"block\" }}\r\n              type=\"primary\"\r\n              className=\"btn\"\r\n              size=\"large\"\r\n              onClick={this.commitNote}\r\n            >\r\n              {/* 添加贴文用的保存按钮 */}\r\n              保存\r\n            </Button>\r\n            <Button\r\n              style={{ display: ifPublish ? \"block\" : \"none\" }}\r\n              type=\"dashed\"\r\n              className=\"btn\"\r\n              size=\"large\"\r\n              onClick={() => {\r\n                this.setState({ ifEdit: !ifEdit });\r\n              }}\r\n            >\r\n              {ifEdit ? \"取消\" : \"编辑\"}\r\n            </Button>\r\n            <Button\r\n              style={{ display: ifPublish ? \"block\" : \"none\" }}\r\n              type=\"primary\"\r\n              className=\"btn\"\r\n              size=\"large\"\r\n              onClick={this.publishNote}\r\n            >\r\n              修改\r\n            </Button>\r\n          </div>\r\n        </div>\r\n      </div>\r\n    );\r\n  }\r\n}\r\n","import Main from \"../pages/main/main\";\r\nimport Login from \"../pages/login/login\";\r\nimport Home from \"../pages/home/home\";\r\nimport Note from \"../pages/note/note\";\r\nimport Friend from \"../pages/friend/friend\";\r\nimport Me from \"../pages/me/me\";\r\nimport Detail from \"../pages/detail/detail\";\r\nimport Publish from \"../pages/publish/publish\";\r\n\r\nexport const mainRoutes = [\r\n    {\r\n        path: '/main/home',\r\n        component: Home,\r\n        exact: true,\r\n    },\r\n    {\r\n        path: '/main/note',\r\n        component: Note,\r\n        exact: true,\r\n    },\r\n    {\r\n        path: '/main/friend',\r\n        component: Friend,\r\n        exact: true,\r\n    },\r\n    {\r\n        path: '/main/me',\r\n        component: Me,\r\n        exact: true,\r\n    },\r\n    {\r\n        path: '/main/detail',\r\n        component: Detail,\r\n        exact: true,\r\n    },\r\n    {\r\n        path: '/main/publish',\r\n        component: Publish,\r\n        exact: true,\r\n    },\r\n]\r\n\r\nconst routes = [\r\n    {\r\n        path: '/login',\r\n        component: Login,\r\n        exact: true,\r\n    },\r\n    {\r\n        path: '/main',\r\n        component: Main,\r\n        exact:false\r\n    }\r\n]\r\n\r\nexport default routes;","import React, { Component } from \"react\";\nimport { BrowserRouter, Route, Switch, Redirect } from \"react-router-dom\";\nimport routes from \"./routes/index\";\nimport './App.css';\nexport default class App extends Component {\n  render() {\n    return (\n      <BrowserRouter>\n        <Switch>\n          {routes.map((r) => {\n            return (\n              <Route\n                key={r.path}\n                path={r.path}\n                component={r.component}\n                exact={r.exact}\n              ></Route>\n            );\n          })}\n          <Redirect to=\"/login\"></Redirect>\n        </Switch>\n      </BrowserRouter>\n      // routes\n    );\n  }\n}\n","import React from 'react';\nimport ReactDOM from 'react-dom';\nimport App from './App';\nimport \"antd/dist/antd.css\";\n\nReactDOM.render(\n  <React.StrictMode>\n    <App />\n  </React.StrictMode>,\n  document.getElementById('root')\n);\n\n// If you want to start measuring performance in your app, pass a function\n// to log results (for example: reportWebVitals(console.log))\n// or send to an analytics endpoint. Learn more: https://bit.ly/CRA-vitals\n"],"sourceRoot":""}